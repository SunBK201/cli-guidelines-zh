# å‘½ä»¤è¡Œç•Œé¢è®¾è®¡æŒ‡å—

è¿™æ˜¯ä¸€ä¸ª[å¼€æºæŒ‡å—](https://github.com/SunBK201/cli-guidelines-zh)ï¼Œå¯ä»¥å¸®åŠ©æ‚¨ç¼–å†™å‡ºæ›´å¥½çš„å‘½ä»¤è¡Œç¨‹åºï¼Œé‡‡ç”¨ç»å…¸çš„ UNIX å“²å­¦å¹¶å¯¹å…¶è¿›è¡Œæ”¹è¿›ï¼Œä»¥é€‚åº”ç°ä»£ç”Ÿäº§ç¯å¢ƒçš„éœ€è¦ã€‚

## è¯‘è€… {#authors}

**SunBK201** 

åŸé¡¹ç›®æ˜¯ [cli-guidelines](https://github.com/cli-guidelines/cli-guidelines)ï¼Œè¯‘è€…å¯¹å…¶è¿›è¡Œäº†æœ¬åœ°åŒ–ã€‚

[@SunBK201](https://github.com/SunBK201)

<iframe class="github-button" src="https://ghbtns.com/github-btn.html?user=SunBK201&repo=cli-guidelines-zh&type=star&count=true&size=large" frameborder="0" scrolling="0" width="170" height="40" title="GitHub"></iframe>

## ä½œè€… {#authors}

**Aanand Prasad** \
Engineer at Squarespace, co-creator of Docker Compose. \
[@aanandprasad](https://twitter.com/aanandprasad)

**Ben Firshman** \
Co-creator [Replicate](https://replicate.ai/), co-creator of Docker Compose. \
[@bfirsh](https://twitter.com/bfirsh)

**Carl Tashian** \
Developer Advocate at [Smallstep](https://smallstep.com/), first engineer at Zipcar, co-founder Trove. \
[tashian.com](https://tashian.com/) [@tashian](https://twitter.com/tashian)

**Eva Parish** \
Technical Writer at Squarespace, Oâ€™Reilly contributor.\
[evaparish.com](https://evaparish.com/) [@evpari](https://twitter.com/evpari)

Design by [Mark Hurrell](https://mhurrell.co.uk/). Thanks to Andreas Jansson for early contributions, and Andrew Reitz, Ashley Williams, Brendan Falk, Chester Ramey, Dj Walker-Morgan, Jacob Maine, James Coglan, Michael Dwan, and Steve Klabnik for reviewing drafts.

<iframe class="github-button" src="https://ghbtns.com/github-btn.html?user=cli-guidelines&repo=cli-guidelines&type=star&count=true&size=large" frameborder="0" scrolling="0" width="170" height="30" title="GitHub"></iframe>

[Join us on Discord](https://discord.gg/EbAW5rUCkE) if you want to discuss the guide or CLI design.



## å‰è¨€ {#foreword}

åœ¨ 20 ä¸–çºª 80 å¹´ä»£ï¼Œå¦‚æœæ‚¨éœ€è¦ç”¨ä¸€å°ä¸ªäººè®¡ç®—æœºåšä¸€äº›äº‹æƒ…ï¼Œåœ¨é¢å¯¹ `C:\>` æˆ– `~$` æ—¶ï¼Œæ‚¨éœ€è¦çŸ¥é“è¯¥è¾“å…¥ä»€ä¹ˆã€‚
ç„¶è€Œå¸®åŠ©æ˜¯ä»¥åšé‡çš„èºæ—‹è£…è®¢æ‰‹å†Œçš„å½¢å¼æä¾›çš„ï¼Œé”™è¯¯ä¿¡æ¯æ˜¯ä¸é€æ˜çš„ï¼Œæ²¡æœ‰ Stack Overflow å¯ä»¥æ‹¯æ•‘æ‚¨ã€‚
ä½†æ˜¯ï¼Œå¦‚æœæ‚¨æœ‰å¹¸èƒ½å¤Ÿè®¿é—® Internetï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥ä» Usenetï¼ˆä¸€ä¸ªæ—©æœŸçš„ Internet ç¤¾åŒºï¼‰è·å¾—å¸®åŠ©ï¼Œé‚£é‡Œé¢æ»¡æ˜¯å’Œæ‚¨ä¸€æ ·æ²®ä¸§çš„äººã€‚
ä»–ä»¬æˆ–è®¸å¯ä»¥å¸®åŠ©æ‚¨è§£å†³é—®é¢˜ï¼Œæˆ–è€…è‡³å°‘æä¾›ä¸€äº›ç²¾ç¥æ”¯æŒã€‚

40 å¹´åï¼Œæ¯ä¸ªäººéƒ½èƒ½å¤Ÿè½»è€Œæ˜“ä¸¾åœ°ä½¿ç”¨è®¡ç®—æœºï¼Œä½†æ˜¯ä»£ä»·å¾€å¾€æ˜¯ç‰ºç‰²äº†åº•å±‚ç»ˆç«¯ç”¨æˆ·çš„æ§åˆ¶æƒã€‚åœ¨è®¸å¤šè®¾å¤‡ä¸Šï¼Œæ ¹æœ¬æ²¡æœ‰å‘½ä»¤è¡Œè®¿é—®æ–¹å¼ï¼Œä¸€éƒ¨åˆ†åŸå› æ˜¯è¿™ä¸â€œå›´å¢™èŠ±å›­â€å’Œåº”ç”¨å•†åº—å…¬å¸çš„åˆ©ç›Šç›¸æ‚–ã€‚

ä»Šå¤©çš„å¤§å¤šæ•°äººéƒ½ä¸çŸ¥é“å‘½ä»¤è¡Œæ˜¯ä»€ä¹ˆï¼Œæ›´ä¸ç”¨è¯´ä»–ä»¬ä¸ºä»€ä¹ˆè¦è´¹å¿ƒæ€å»ä½¿ç”¨å®ƒäº†ã€‚æ­£å¦‚è®¡ç®—æœºå…ˆé©± Alan Kay åœ¨[2017å¹´çš„ä¸€æ¬¡é‡‡è®¿](https://www.fastcompany.com/40435064/what-alan-kay-thinks-about-the-iphone-and-technology-now)ä¸­æ‰€è¯´ï¼Œâ€œBecause people donâ€™t understand what computing is about, they think they have it in the iPhone, and that illusion is as bad as the illusion that â€˜Guitar Heroâ€™ is the same as a real guitar.â€ã€‚

Kay çš„â€œçœŸæ­£çš„å‰ä»–â€ä¸å®Œå…¨æ˜¯ CLIã€‚ä»–è®¨è®ºçš„æ˜¯æä¾› CLI åŠŸèƒ½çš„è®¡ç®—æœºç¼–ç¨‹æ–¹å¼ï¼Œè¿™ç§ç¼–ç¨‹æ–¹å¼è¿œè¶…äºåœ¨æ–‡æœ¬æ–‡ä»¶ä¸­ç¼–å†™è½¯ä»¶ã€‚Kay çš„ä¿¡å¾’ä»¬è®¤ä¸ºï¼Œæˆ‘ä»¬éœ€è¦æ‰“ç ´æˆ‘ä»¬å·²ç»ä½¿ç”¨äº†å‡ åå¹´çš„åŸºäºæ–‡æœ¬æ–‡ä»¶ç¼–ç¨‹çš„å±€é™ã€‚

æƒ³è±¡ä¸€ä¸‹æœªæ¥æˆ‘ä»¬ç”¨å®Œå…¨ä¸åŒçš„æ–¹å¼æ¥ç¼–å†™è®¡ç®—æœºç¨‹åºæ˜¯ä¸€ä»¶å¤šä¹ˆä»¤äººå…´å¥‹çš„äº‹æƒ…ã€‚å³ä½¿åœ¨ä»Šå¤©ï¼Œç”µå­è¡¨æ ¼ä»ç„¶æ˜¯è¿„ä»Šä¸ºæ­¢æœ€æµè¡Œçš„ç¼–ç¨‹è¯­è¨€ï¼Œè€Œæ— ä»£ç è¿åŠ¨æ­£åœ¨è¿…é€Ÿå‘å±•ï¼Œå› ä¸ºå®ƒåœ¨è¯•å›¾å–ä»£ä¸€äº›æŠ¢æ‰‹çš„å¤©æ‰ç¨‹åºå‘˜ã€‚

ç„¶è€Œï¼Œå°½ç®¡å‘½ä»¤è¡Œæœ‰å…¶é™ˆæ—§çš„ã€æ•°åå¹´ä¹‹ä¹…çš„çº¦æŸå’Œä»¤äººè´¹è§£çš„æ€ªå¼‚ï¼Œä½†å®ƒä¾æ—§æ˜¯è®¡ç®—æœºä¸­æœ€ _ä¸‡èƒ½_ çš„ä¸€è§’ã€‚
å®ƒèƒ½å¤Ÿè®©æ‚¨æ‹‰å¼€è®¡ç®—æœºçœŸæ­£çš„é¢çº±ï¼Œçœ‹çœ‹é‡Œé¢åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆï¼Œå¹¶èƒ½å¤Ÿè®©æ‚¨ä»¥ GUI æ— æ³•æ‰¿å—çš„å¤æ‚ä¸æ·±åº¦ä¸æœºå™¨è¿›è¡Œäº¤äº’ã€‚
ä»»ä½•æƒ³å­¦ä¹ å®ƒçš„äººéƒ½å¯ä»¥åœ¨å‡ ä¹æ‰€æœ‰çš„ç¬”è®°æœ¬ç”µè„‘ä¸Šä½¿ç”¨å®ƒã€‚
å®ƒå¯ä»¥äº¤äº’è¿è¡Œï¼Œä¹Ÿå¯ä»¥è‡ªåŠ¨åŒ–è¿è¡Œã€‚
æ­¤å¤–ï¼Œå®ƒçš„å˜åŒ–é€Ÿåº¦ä¸å¦‚ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†å¿«ã€‚
å…¶åˆ›é€ æ€§ä»·å€¼æºäºç¨³å®šæ€§ã€‚

æ‰€ä»¥ï¼Œå½“æˆ‘ä»¬ä»ç„¶æ‹¥æœ‰å‘½ä»¤è¡Œçš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡æœ€å¤§åŒ–å‘½ä»¤è¡Œçš„æ•ˆç”¨å’Œå¯è®¿é—®æ€§ã€‚

ä»å¾ˆæ—©ä¹‹å‰å¼€å§‹ï¼Œæˆ‘ä»¬çš„è®¡ç®—æœºç¼–ç¨‹æ–¹å¼å‘ç”Ÿäº†å¾ˆå¤§çš„å˜åŒ–ã€‚
è¿‡å»çš„å‘½ä»¤è¡Œæ˜¯ _æœºå™¨ä¼˜å…ˆ_ çš„: å’Œè„šæœ¬å¹³å°ä¸Šçš„ REPL å·®ä¸å¤šã€‚
ä½†æ˜¯ï¼Œéšç€é€šç”¨è§£é‡Šè¯­è¨€çš„è“¬å‹ƒå‘å±•ï¼Œshell è„šæœ¬çš„ä½œç”¨å·²ç»å‡å°‘ã€‚
å¦‚ä»Šçš„å‘½ä»¤è¡Œæ˜¯ _ä»¥äººä¸ºæœ¬_ çš„: ä¸€ä¸ªåŸºäºæ–‡æœ¬çš„ UIï¼Œæä¾›å¯¹å„ç§å·¥å…·ã€ç³»ç»Ÿå’Œå¹³å°çš„è®¿é—®ã€‚
åœ¨è¿‡å»ï¼Œç¼–è¾‘å™¨æ˜¯åœ¨ç»ˆç«¯é‡Œçš„ï¼Œå¦‚ä»Šçš„ç»ˆç«¯é€šå¸¸æ˜¯ç¼–è¾‘å™¨çš„ä¸€ä¸ªåŠŸèƒ½ã€‚
ç±»ä¼¼ `git` çš„å¤šå·¥å…·å‘½ä»¤ä¹Ÿåœ¨å¤§é‡æ¶Œç°ã€‚
åµŒå¥—å‘½ä»¤ï¼Œä»¥åŠæ‰§è¡Œæ•´ä¸ªå·¥ä½œæµè€Œä¸æ˜¯åŸå­åŠŸèƒ½çš„é«˜çº§å‘½ä»¤ä¹Ÿç›¸ç»§å‡ºç°ã€‚

å—ä¼ ç»Ÿ UNIX å“²å­¦çš„å¯å‘ï¼Œå—æœ‰è¶£ä¸”åŠŸèƒ½å¼ºå¤§çš„ CLI ç¯å¢ƒçš„é©±åŠ¨ï¼Œä»¥åŠåœ¨æˆ‘ä»¬ä½œä¸ºç¨‹åºå‘˜çš„ç»éªŒçš„æŒ‡å¯¼ä¸‹ï¼Œæˆ‘ä»¬å†³å®šæ˜¯æ—¶å€™é‡æ¸©æ„å»ºå‘½ä»¤è¡Œç¨‹åºçš„æœ€ä½³å®è·µå’Œè®¾è®¡åŸåˆ™äº†ã€‚

å‘½ä»¤è¡Œä¸‡å²ï¼

## ä»‹ç» {#introduction}

æœ¬æ–‡æ¡£æ¶µç›–äº†é«˜å±‚æ¬¡çš„è®¾è®¡ç†å¿µå’Œå…·ä½“çš„æŒ‡å¯¼æ–¹é’ˆã€‚
å®ƒåœ¨æŒ‡å¯¼æ–¹é’ˆä¸Šæ›´åŠ åé‡ï¼Œå› ä¸ºä½œä¸ºå®è·µè€…ï¼Œæˆ‘ä»¬çš„åŸåˆ™æ˜¯ä¸éœ€è¦è¿›è¡Œå¤ªå¤šçš„é«˜è°ˆé˜”è®ºã€‚
æˆ‘ä»¬ç›¸ä¿¡è¦é€šè¿‡ä¾‹å­å­¦ä¹ ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿå‡†å¤‡äº†ä¸å°‘èŒƒä¾‹ä»¥ä¾›å¤§å®¶å‚è€ƒã€‚

è¿™ç¯‡æŒ‡å—ä¸ä¼šåŒ…å«ç±»ä¼¼ emacs å’Œ vim é‚£æ ·å…¨å±ç»ˆç«¯ç¨‹åºã€‚
å…¨å±ç¨‹åºæ˜¯å°ä¼—é¡¹ç›®ï¼Œå¾ˆå°‘æœ‰äººèƒ½è®¾è®¡å‡ºè¿™æ ·çš„é¡¹ç›®ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œæœ¬æŒ‡å—ä¹Ÿä¸æ¶‰åŠç¼–ç¨‹è¯­è¨€å’Œå·¥å…·ã€‚

æœ¬æŒ‡å—é€‚ç”¨äºè°ï¼Ÿ
- å¦‚æœæ‚¨æ­£åœ¨åˆ›å»ºä¸€ä¸ª CLI ç¨‹åºï¼Œå¹¶ä¸”æ‚¨æ­£åœ¨ä¸ºå®ƒçš„ UI è®¾è®¡å¯»æ‰¾åŸåˆ™å’Œå…·ä½“çš„æœ€ä½³å®è·µï¼Œé‚£ä¹ˆæœ¬æŒ‡å—å°±æ˜¯ä¸ºæ‚¨å‡†å¤‡çš„ã€‚
- å¦‚æœæ‚¨æ˜¯ä¸“ä¸šçš„â€œCLI UIè®¾è®¡å¸ˆâ€ ï¼Œé‚£å°±å¤ªå¥½äº†ï¼Œæˆ‘ä»¬å¾ˆä¹æ„å‘æ‚¨å­¦ä¹ ã€‚
- å¦‚æœæ‚¨æƒ³é¿å…ä¸ 40 å¹´æ¥ CLI è®¾è®¡æƒ¯ä¾‹ç›¸æ‚–çš„é”™è¯¯ï¼Œæœ¬æŒ‡å—éå¸¸é€‚åˆæ‚¨ã€‚
- å¦‚æœæ‚¨æƒ³é€šè¿‡ç¨‹åºçš„è‰¯å¥½è®¾è®¡å’Œæœ‰ç”¨çš„å¸®åŠ©æ–‡æ¡£ä»¤ç”¨æˆ·æ»¡æ„ï¼Œé‚£ä¹ˆæœ¬æŒ‡å—ç»å¯¹é€‚åˆæ‚¨ã€‚
- å¦‚æœæ‚¨æ­£åœ¨åˆ›å»ºä¸€ä¸ª GUI ç¨‹åºï¼Œè¿™ç¯‡æŒ‡å—ä¸é€‚åˆæ‚¨ï¼Œä½†æ˜¯å¦‚æœæ‚¨ä»ç„¶å†³æ„è¦é˜…è¯»ï¼Œæ‚¨å¯èƒ½ä¼šå­¦åˆ°ä¸€äº› GUI çš„é”™è¯¯èŒƒå¼ã€‚
- å¦‚æœæ‚¨æ­£åœ¨è®¾è®¡ Minecraft çš„æ²‰æµ¸å¼å…¨å± CLI ç«¯å£ï¼Œé‚£ä¹ˆæœ¬æŒ‡å—ä¸é€‚åˆæ‚¨ã€‚
  (ä½†æˆ‘ä»¬å·²ç»ç­‰ä¸åŠè¦çœ‹äº†!)

## åŸåˆ™ {#philosophy}

ä»¥ä¸‹æ˜¯æˆ‘ä»¬è®¤ä¸ºä¼˜ç§€çš„ CLI è®¾è®¡åº”å…·å¤‡çš„åŸºæœ¬åŸåˆ™ã€‚

### ä»¥äººä¸ºæœ¬ {#human-first-design}

ä¼ ç»Ÿçš„ UNIX å‘½ä»¤æ˜¯ä¸ºäº†è¢«å…¶å®ƒç¨‹åºè°ƒç”¨è€Œç¼–å†™çš„ã€‚
ä¸å›¾å½¢åº”ç”¨ç¨‹åºç›¸æ¯”ï¼Œå®ƒä»¬ä¸ç¼–ç¨‹è¯­è¨€ä¸­çš„å‡½æ•°æœ‰æ›´å¤šçš„å…±åŒä¹‹å¤„ã€‚

å¦‚ä»Šï¼Œå°½ç®¡è®¸å¤š CLI ç¨‹åºä¸»è¦(ç”šè‡³ä¸“é—¨)æ˜¯è¢«äººç±»ä½¿ç”¨ï¼Œè€Œä¸æ˜¯è¢«ç¨‹åºè°ƒç”¨ï¼Œä½†å®ƒä»¬çš„è®¸å¤šäº¤äº’è®¾è®¡ä»ç„¶æ‰¿è½½ç€è¿‡å»çš„åŒ…è¢±ã€‚
ç°åœ¨æ˜¯æ—¶å€™æ‘†è„±è¿™äº›å†å²åŒ…è¢±äº†: å¦‚æœä¸€ä¸ªå‘½ä»¤ä¸»è¦æ˜¯è¢«äººç±»æ‰€ä½¿ç”¨çš„ï¼Œè€Œä¸æ˜¯ç¨‹åºï¼Œé‚£ä¹ˆå®ƒå°±åº”è¯¥é¦–å…ˆä»¥äººä¸ºæœ¬è®¾è®¡ã€‚

### å°å³æ˜¯ç¾ {#simple-parts-that-work-together}

[æœ€åˆçš„UNIXå“²å­¦](https://en.wikipedia.org/wiki/Unix_philosophy)ä¸­ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™ï¼š
ä½¿ç”¨å…·æœ‰æ•´æ´æ¥å£çš„ç®€å•ç¨‹åºä»è€Œç»„åˆæ„å»ºå‡ºæ›´å¤§çš„ç³»ç»Ÿã€‚
æ‚¨åº”è¯¥ç¼–å†™è¶³å¤Ÿæ¨¡å—åŒ–çš„ç¨‹åºï¼Œä»¥ä¾¿æ ¹æ®éœ€è¦è¿›è¡Œç»„åˆé‡æ„ï¼Œè€Œä¸æ˜¯ä¸æ–­åœ°æŠŠè¶Šæ¥è¶Šå¤šçš„æ–°ç‰¹æ€§å¡åˆ°ä¸€ä¸ªç¨‹åºä¸­å»ã€‚

åœ¨è¿‡å»ï¼Œç¨‹åºçš„ç»„åˆä¸»è¦æ˜¯é€šè¿‡ç®¡é“å’Œ shell è„šæœ¬æ¥å®ç°çš„ã€‚
éšç€é€šç”¨è§£é‡Šè¯­è¨€çš„å…´èµ·ï¼Œå®ƒä»¬çš„ä½œç”¨å¯èƒ½å·²å‡å¼±ï¼Œä½†å®ƒä»¬å¹¶æ²¡æœ‰æ¶ˆå¤±ã€‚
æ­¤å¤–ï¼Œä»¥ CI/CDã€ä¸šåŠ¡æµå’Œé…ç½®ç®¡ç†å½¢å¼çš„å¤§å‹è‡ªåŠ¨åŒ–ç³»ç»Ÿè“¬å‹ƒå‘å±•ã€‚ç¨‹åºçš„ç»„åˆæ€§ä¸ä»¥å¾€ä¸€æ ·é‡è¦ã€‚

å¹¸è¿çš„æ˜¯ï¼ŒUNIX ç¯å¢ƒä¸­é•¿æœŸå»ºç«‹çš„çº¦å®š(ä¸“ä¸ºè¿™ä¸€ç›®çš„è€Œè®¾è®¡)è‡³ä»Šä»å¯¹æˆ‘ä»¬æœ‰å¸®åŠ©ã€‚
æ ‡å‡†çš„ in/out/err, signals, exit codes å’Œå…¶ä»–æœºåˆ¶å¯ç¡®ä¿ä¸åŒçš„ç¨‹åºå¾ˆå¥½åœ°è¿æ¥åœ¨ä¸€èµ·ã€‚
æ™®é€šåŸºäºè¡Œçš„æ–‡æœ¬å¾ˆå®¹æ˜“åœ¨å‘½ä»¤ä¹‹é—´è¿›è¡Œç®¡é“è¿æ¥ã€‚
JSON æ˜¯ä¸€é¡¹è¾ƒæ–°çš„å‘æ˜ï¼Œå®ƒåœ¨éœ€è¦æ—¶ä¸ºæˆ‘ä»¬æä¾›äº†æ›´å¤šç»“æ„ï¼Œå¹¶ä½¿æˆ‘ä»¬å¯ä»¥æ›´è½»æ¾åœ°å°†å‘½ä»¤è¡Œå·¥å…·ä¸ Web é›†æˆã€‚

æ— è®ºæ‚¨è¦æ„å»ºä»€ä¹ˆè½¯ä»¶ï¼Œäººä»¬ç»å¯¹ä¼šä»¥æ‚¨æ„æƒ³ä¸åˆ°çš„æ–¹å¼ä½¿ç”¨å®ƒã€‚
æ‚¨çš„è½¯ä»¶ _å°†_ æˆä¸ºä¸€ä¸ªæ›´å¤§ç³»ç»Ÿä¸­çš„ä¸€éƒ¨åˆ†ï¼Œæ‚¨å”¯ä¸€çš„é€‰æ‹©åªèƒ½æ˜¯èƒ½å¦è®©å®ƒæˆä¸ºè¿™ä¸ªç³»ç»Ÿä¸­è¡Œä¸ºç¨³å®šçš„ä¸€éƒ¨åˆ†ã€‚

æœ€é‡è¦çš„æ˜¯ï¼Œç»„åˆæ€§çš„è®¾è®¡æ²¡æœ‰ä¸ä»¥äººä¸ºæœ¬çš„è®¾è®¡ç›¸æ‚–ã€‚
æœ¬æ–‡ä¸­çš„å¤§éƒ¨åˆ†å»ºè®®éƒ½æ˜¯å…³äºå¦‚ä½•åŒæ—¶å®ç°è¿™ä¸¤è€…ã€‚

### ç¨‹åºé—´ä¸€è‡´æ€§ {#consistency-across-programs}

ç»ˆç«¯çš„çº¦å®šå·²ç‰¢ç‰¢æ‰æ ¹äºæˆ‘ä»¬çš„æ‰‹æŒ‡ã€‚
æˆ‘ä»¬åœ¨å‰æœŸå¿…é¡»æ”¯ä»˜æˆæœ¬æ¥å­¦ä¹ å‘½ä»¤è¡Œè¯­æ³•ã€flagsã€ç¯å¢ƒå˜é‡ç­‰ç­‰ï¼Œä½†åªè¦ç¨‹åºä¸ç¨‹åºä¹‹é—´çš„è§„åˆ™æ¨¡å¼æ˜¯ä¸€è‡´çš„ï¼Œæˆ‘ä»¬ä»˜å‡ºçš„å­¦ä¹ æˆæœ¬å°±ä¼šåœ¨é•¿æœŸçš„æ•ˆç‡æ–¹é¢å¾—åˆ°å›æŠ¥ã€‚

å› æ­¤ï¼ŒCLI åº”å°½å¯èƒ½åœ°éµå¾ªç°ç°å­˜çš„è§„åˆ™æ¨¡å¼ã€‚
è¿™ä¹Ÿæ˜¯ CLI è¿™ä¹ˆç¬¦åˆç›´è§‰æ€§å’Œæ˜“çŒœæ€§çš„åŸå› ï¼Œä¹Ÿæ˜¯ CLI ç”¨æˆ·å¦‚æ­¤é«˜æ•ˆçš„åŸå› ã€‚

è¯è™½å¦‚æ­¤ï¼Œæœ‰äº›æ—¶å€™ç¨‹åºé—´ä¸€è‡´æ€§ä¼šä¸æ˜“ç”¨æ€§å†²çªã€‚
æ¯”å¦‚ï¼Œè®¸å¤šå†å²æ‚ ä¹…çš„ UNIX å‘½ä»¤é»˜è®¤æƒ…å†µä¸‹ä¸ä¼šè¾“å‡ºå¤ªå¤šä¿¡æ¯ï¼Œè¿™å¯èƒ½ä¼šç»™é‚£äº›ä¸å¤ªç†Ÿæ‚‰å‘½ä»¤è¡Œçš„äººä»¬é€ æˆæ··ä¹±æˆ–æ‹…å¿§ã€‚

å½“éµå®ˆç¨‹åºé—´ä¸€è‡´æ€§åŸåˆ™ä¼šæŸå®³ç¨‹åºçš„å¯ç”¨æ€§æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘æ˜¯å¦è¦æ‰“ç ´è¿™ç§ä¸€è‡´æ€§åŸåˆ™ï¼Œä½†è¿™æ ·çš„å†³å®šåº”è¯¥è°¨æ…åšå‡ºã€‚

### è¾“å‡ºé€‚ä¸­ {#saying-just-enough}

ç»ˆç«¯æ˜¯ä¸€ä¸ªçº¯ä¿¡æ¯çš„ä¸–ç•Œã€‚
æ‚¨å¯ä»¥è®¤ä¸ºä¿¡æ¯æ˜¯ä¸€ä¸ªç•Œé¢ï¼Œå°±åƒä»»ä½•ç•Œé¢ä¸€æ ·ï¼Œç»å¸¸æœ‰è¿‡å¤šæˆ–è¿‡å°‘çš„ä¿¡æ¯ã€‚

åœ¨å‘½ä»¤æŒ‚èµ·å‡ åˆ†é’Ÿçš„æœŸé—´ï¼Œç”±äºè¾“å‡ºçš„ä¿¡æ¯å¤ªå°‘ï¼Œç”¨æˆ·ä¼šå¼€å§‹æ€€ç–‘å®ƒæ˜¯å¦æŒ‚æ‰äº†ã€‚
å½“å‘½ä»¤è¾“å‡ºäº†ä¸€é¡µåˆä¸€é¡µçš„è°ƒè¯•ä¿¡æ¯æ—¶ï¼Œè¿‡å¤šçš„ä¿¡æ¯åè€Œæ·¹æ²¡äº†åœ¨æ¾æ•£ç¢ç‰‡ä¸­çœŸæ­£é‡è¦çš„éƒ¨åˆ†ã€‚
æœ€ç»ˆç»“æœä¸€æ ·: ç¼ºä¹æ¸…æ™°åº¦ï¼Œè®©ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘å’Œæ¼ç«ã€‚

è¿™ç§è¾“å‡ºé€‚ä¸­çš„å¹³è¡¡å¾ˆéš¾åšåˆ°ï¼Œä½†å¦‚æœè½¯ä»¶è¦ä¸ºç”¨æˆ·æä¾›æœåŠ¡ï¼Œè¿™ç»å¯¹æ˜¯è‡³å…³é‡è¦çš„ã€‚

### åŠŸèƒ½æ˜“å‘ç°æ€§ {#ease-of-discovery}

å½“æ¶‰åŠåˆ°åŠŸèƒ½çš„æ˜“å‘ç°æ€§æ—¶ï¼ŒGUI å äº†ä¸Šé£ã€‚
æ‚¨èƒ½åšçš„ä¸€åˆ‡éƒ½æ˜¾ç¤ºåœ¨æ‚¨é¢å‰çš„å±å¹•ä¸Šï¼Œå› æ­¤æ‚¨æ— éœ€å­¦ä¹ ä»»ä½•å†…å®¹å°±å¯ä»¥æ‰¾åˆ°æ‰€éœ€çš„åŠŸèƒ½ï¼Œç”šè‡³å¯ä»¥å‘ç°è‡ªå·±ä¸çŸ¥é“çš„åŠŸèƒ½ã€‚

æˆ–è®¸æ‚¨å¯ä»¥å‡è®¾å‘½ä»¤è¡Œç•Œé¢ä¸æ­¤ç›¸åï¼Œæ‚¨ä¸å¾—ä¸è®°ä½æ‰€æœ‰çš„åŠŸèƒ½ã€‚
æœ€åˆçš„ [Macintosh äººæœºç•Œé¢æŒ‡å—](https://archive.org/details/applehumaninterf00appl)ï¼Œå‘å¸ƒäº1987å¹´ï¼Œæ¨èä½¿ç”¨ â€œçœ‹è§å¹¶æŒ‡å‘ï¼ˆè€Œä¸æ˜¯è®°ä½å¹¶é”®å…¥ï¼‰â€ æ–¹å¼ï¼Œå…¶ä¸­çš„è¯´æ³•é»˜è®¤æ‚¨ä¼¼ä¹åªèƒ½é€‰æ‹©å…¶ä¸­ä¸€ç§æ–¹å¼ã€‚

ä½†è¿™äº›äº‹æƒ…ä¸å¿…ç›¸äº’æ’æ–¥ã€‚
ä½¿ç”¨å‘½ä»¤è¡Œçš„æ•ˆç‡æ¥è‡ªäºè®°ä½å‘½ä»¤ï¼Œä½†æ˜¯æ²¡æœ‰ç†ç”±å‘½ä»¤æœ¬èº«ä¸èƒ½å¸®åŠ©æ‚¨å­¦ä¹ å’Œè®°å¿†å‘½ä»¤ã€‚

å…·å¤‡åŠŸèƒ½æ˜“å‘ç°æ€§çš„ CLI åº”åŒ…å«å…¨é¢çš„å¸®åŠ©æ–‡æ¡£ï¼Œæä¾›è®¸å¤šç¤ºä¾‹ï¼Œå¹¶èƒ½å¤Ÿå¯¹ä¸‹ä¸€æ­¥è¦è¿è¡Œä»€ä¹ˆå‘½ä»¤ä»¥åŠå‘ç”Ÿé”™è¯¯æ—¶åº”é‡‡å–çš„æªæ–½æå‡ºå»ºè®®ã€‚
æˆ‘ä»¬å¯ä»¥ä» GUI ä¸­çªƒå–æƒ³æ³•ï¼Œä»¥ä½¿ CLI æ˜“äºå­¦ä¹ å’Œä½¿ç”¨ï¼Œå³ä½¿å¯¹äºè¿›é˜¶ç”¨æˆ·ä¹Ÿæ˜¯å¦‚æ­¤ã€‚

_å¼•ç”¨: The Design of Everyday Things (Don Norman)ï¼ŒMacintosh Human Interface Guidelines_

### å¯¹è¯æ˜¯å¸¸æ€ {#conversation-as-the-norm}

GUI çš„è®¾è®¡ï¼Œå°¤å…¶æ˜¯åœ¨æ—©æœŸï¼Œå¤§é‡ä½¿ç”¨äº† _æ¯”å–»æ‰‹æ³•_: æ¡Œé¢ã€æ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€å›æ”¶ç«™ã€‚
è¿™æ˜¯å¾ˆæœ‰é“ç†çš„ï¼Œå› ä¸ºè®¡ç®—æœºæ­£ä¸æ–­ä½¿è‡ªå·±æ›´åŠ ç¬¦åˆå¸¸è¯†ã€‚
æ¯”å–»çš„æ˜“äºå®ç°æ˜¯ GUI ç›¸å¯¹äº CLI çš„å·¨å¤§ä¼˜åŠ¿ä¹‹ä¸€ã€‚
ç„¶è€Œï¼Œå¾ˆè®½åˆºçš„æ˜¯ï¼ŒCLI ä¸€ç›´ä½“ç°äº†ä¸€ä¸ªå¶ç„¶çš„æ¯”å–»: å®ƒæ˜¯ä¸€åœºå¯¹è¯ã€‚

é™¤äº†æœ€ç®€å•çš„å‘½ä»¤ä¹‹å¤–ï¼Œè¿è¡Œä¸€ä¸ªç¨‹åºé€šå¸¸æ¶‰åŠä¸æ­¢ä¸€æ¬¡çš„è°ƒç”¨ã€‚
é€šå¸¸ï¼Œè¿™æ˜¯å› ä¸ºå¾ˆéš¾åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨å‘½ä»¤å°±æ­£ç¡®åœ°è¾¾æˆç›®æ ‡ï¼šç”¨æˆ·é”®å…¥å‘½ä»¤ï¼Œé‡åˆ°é”™è¯¯ï¼Œä¿®æ”¹å‘½ä»¤ï¼Œé‡åˆ°å…¶ä»–é”™è¯¯ç­‰ç­‰ï¼Œç›´åˆ°å¯ä»¥æ­£å¸¸ä½¿ç”¨ã€‚
é€šè¿‡åå¤å¤±è´¥æ¥å­¦ä¹ çš„è¿™ç§æ¨¡å¼å°±åƒæ˜¯ä¸€åœºç”¨æˆ·ä¸ç¨‹åºä¹‹é—´çš„å¯¹è¯ã€‚

ä¸è¿‡ï¼Œè¯•é”™æ³•å¹¶ä¸æ˜¯å¯¹è¯äº’åŠ¨çš„å”¯ä¸€æ–¹å¼ã€‚
æ­¤å¤–è¿˜æœ‰ï¼š

- è¿è¡Œä¸€ä¸ªå‘½ä»¤æ¥è®¾ç½®ä¸€ä¸ªå·¥å…·ï¼Œç„¶åå­¦ä¹ è¿è¡Œå“ªäº›å‘½ä»¤æ‰èƒ½çœŸæ­£å¼€å§‹ä½¿ç”¨å®ƒã€‚
- è¿è¡Œå‡ ä¸ªå‘½ä»¤æ¥è¿›è¡Œä¸€ä¸ªå‰ç½®æ“ä½œï¼Œç„¶åè¿è¡Œæœ€åä¸€ä¸ªå‘½ä»¤ï¼ˆæ¯”å¦‚ å¤šä¸ª `git add`ï¼Œåé¢è·Ÿç€ä¸€ä¸ª `git commit`ï¼‰ã€‚
- æ¢ç´¢ä¸€ä¸ªç³»ç»Ÿï¼Œä¾‹å¦‚ç”¨è®¸å¤š `cd` å’Œ `ls` æ¥äº†è§£ç›®å½•ç»“æ„ï¼Œæˆ–ä½¿ç”¨ `git log` å’Œ `git show` æ¥æŸ¥çœ‹æ–‡ä»¶çš„å†å²ã€‚
- åœ¨çœŸæ­£è¿è¡Œä¸€ä¸ªå¤æ‚çš„æ“ä½œä¹‹å‰ï¼Œå…ˆè¿›è¡Œä¸€æ¬¡æ¼”ä¹ ã€‚

æ‰¿è®¤å‘½ä»¤è¡Œäº¤äº’çš„å¯¹è¯æ€§æ„å‘³ç€æ‚¨å¯ä»¥å°†ç›¸å…³æŠ€æœ¯åº”ç”¨åˆ°å‘½ä»¤è¡Œçš„è®¾è®¡ä¸­ã€‚
å½“ç”¨æˆ·è¾“å…¥æ— æ•ˆæ—¶ï¼Œæ‚¨å¯ä»¥æå‡ºçº æ­£å»ºè®®; å½“ç”¨æˆ·ç»å†å¤šä¸ªæ­¥éª¤çš„è¿‡ç¨‹æ—¶ï¼Œæ‚¨å¯ä»¥æ˜ç¡®ä¸­é—´çŠ¶æ€; æ‚¨å¯ä»¥åœ¨ç”¨æˆ·åšä¸€äº›éªšæ“ä½œä¹‹å‰å‘ä»–ä»¬ç¡®è®¤ä¸€åˆ‡æ˜¯å¦è¿›è¡Œæ­£å¸¸ã€‚

ç”¨æˆ·æ­£åœ¨ä¸æ‚¨çš„è½¯ä»¶è¿›è¡Œå¯¹è¯ï¼Œä¸ç®¡æ‚¨æ˜¯å¦æœ‰æ„ä¸ºä¹‹ã€‚
åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸€åœºå……æ»¡æ•Œæ„çš„å¯¹è¯ï¼Œè®©ä»–ä»¬æ„Ÿåˆ°æ„šè ¢å’Œæ€¨æ¨ã€‚
åœ¨æœ€å¥½çš„æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä¸€åœºæ„‰å¿«çš„äº¤æµï¼Œå¯ä»¥åŠ é€Ÿä»–ä»¬è·å¾—æ–°çŸ¥è¯†å’Œæˆå°±æ„Ÿçš„è¿‡ç¨‹ã€‚

_æ·±å…¥é˜…è¯»: [The Anti-Mac User Interface (Don Gentner and Jakob Nielsen)](https://www.nngroup.com/articles/anti-mac-interface/)_

### é²æ£’æ€§ {#robustness-principle}

é²æ£’æ€§æ—¢æ˜¯ä¸€ç§å®¢è§‚å±æ€§ï¼Œä¹Ÿæ˜¯ä¸€ç§ä¸»è§‚å±æ€§ã€‚
å½“ç„¶ï¼Œè½¯ä»¶ _åº”è¯¥_ æ˜¯å¥å£®çš„: å¼‚å¸¸çš„è¾“å…¥åº”è¯¥è¢«å¦¥å–„å¤„ç†ï¼Œæ“ä½œåº”è¯¥åœ¨å¯èƒ½çš„æƒ…å†µä¸‹æ˜¯å¹‚ç­‰çš„ï¼Œç­‰ç­‰ã€‚
ä½†å®ƒä¹Ÿåº”è¯¥è¢« _æ„Ÿè§‰_ æ˜¯å¥å£®çš„ã€‚

æ‚¨åº”è¯¥è®©æ‚¨çš„è½¯ä»¶åœ¨æ„Ÿå®˜ä¸Šä¸ä¼šå´©æºƒã€‚
è®©å®ƒèƒ½ç»™äººä¸€ç§å³æ—¶å“åº”çš„æ„Ÿè§‰ï¼Œå°±å¥½åƒå®ƒæ˜¯ä¸€ä¸ªå·¨å¤§çš„æœºæ¢°æœºå™¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªè„†å¼±çš„å¡‘æ–™â€œè½¯å¼€å…³â€ã€‚

ä¸»è§‚çš„é²æ£’æ€§éœ€è¦å…³æ³¨ç»†èŠ‚ï¼Œå¹¶è®¤çœŸæ€è€ƒå¯èƒ½å‡ºé”™çš„åœ°æ–¹ã€‚
è¿™é‡Œæœ‰è®¸å¤šå°ç»†èŠ‚: è®©ç”¨æˆ·çŸ¥é“å½“å‰æ­£åœ¨å‘ç”Ÿä»€ä¹ˆï¼Œè§£é‡Šå¸¸è§é”™è¯¯çš„å«ä¹‰ï¼Œä¸æ‰“å°è¾“å‡ºå¯æ€•çš„å †æ ˆè·Ÿè¸ªä¿¡æ¯ã€‚

é€šå¸¸ï¼Œé²æ£’æ€§ä¹Ÿå¯ä»¥æ¥è‡ªç®€å•æ€§ã€‚
è®¸å¤šè¾¹ç¼˜æƒ…å†µå’Œå¤æ‚çš„ä»£ç å¾€å¾€ä¼šä½¿ç¨‹åºå˜å¾—è„†å¼±ã€‚

### åŒæ„Ÿå…±æƒ… {#empathy}

å‘½ä»¤è¡Œå·¥å…·æ˜¯ç¨‹åºå‘˜çš„åˆ›ä½œå·¥å…·ï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥åº”è¯¥è®©äººæ„Ÿåˆ°æ„‰æ‚¦ã€‚
è¿™å¹¶ä¸æ„å‘³ç€è¦æŠŠå®ƒä»¬å˜æˆä¸€æ¬¾ç”µå­æ¸¸æˆï¼Œæˆ–è€…ä½¿ç”¨å¤§é‡çš„è¡¨æƒ…ç¬¦å·ï¼ˆå°½ç®¡è¡¨æƒ…ç¬¦å·æœ¬èº«å¹¶æ²¡æœ‰ä»€ä¹ˆé”™ ğŸ˜‰ï¼‰ã€‚
æ‚¨éœ€è¦è¦è®©ç”¨æˆ·è§‰å¾—æ‚¨æ˜¯ç«™åœ¨ä»–ä»¬é‚£ä¸€è¾¹çš„ï¼Œæ‚¨å¸Œæœ›ç”¨æˆ·ä¸€åˆ‡é¡ºåˆ©ï¼Œå¹¶ä¸”æ‚¨å·²ç»å……åˆ†è€ƒè™‘è¿‡ä»–ä»¬çš„é—®é¢˜ä»¥åŠè§£å†³é—®é¢˜çš„æ–¹æ¡ˆã€‚

è™½ç„¶è¿™ä¸ªå»ºè®®å¯èƒ½ä¼šç»™æ‚¨å¸¦æ¥ä¸€äº›å¸®åŠ©ï¼Œä½†æ‚¨æ‰€èƒ½é‡‡å–çš„è¡ŒåŠ¨å¹¶ä¸èƒ½ç¡®ä¿ç”¨æˆ·ä¼šæœ‰è¿™ç§æ„Ÿè§‰ã€‚
å–æ‚¦ç”¨æˆ·æ„å‘³ç€æ¯ä¸€æ¬¡éƒ½ _è¶…è¿‡ä»–ä»¬çš„æœŸæœ›_ï¼Œè¿™å§‹äºåŒæ„Ÿå…±æƒ…ã€‚

### æ··ä¹± {#chaos}

è¿™ä¸ªä¸–ç•Œçš„ç»ˆç«¯ä¸€å›¢ç³Ÿï¼Œ
å‰åçŸ›ç›¾æ— å¤„ä¸åœ¨ï¼Œæ‹–æ…¢äº†æˆ‘ä»¬çš„è„šæ­¥ï¼Œè®©æˆ‘ä»¬ä¸å¾—ä¸åæ€è‡ªå·±ã€‚

ç„¶è€Œï¼Œä¸å¯å¦è®¤çš„æ˜¯ï¼Œè¿™ç§æ··ä¹±ä¸€ç›´æ˜¯åŠ›é‡çš„æºæ³‰ã€‚
ç»ˆç«¯ï¼Œå°±åƒé€šç”¨çš„ UNIX ä¸‹çš„è®¡ç®—ç¯å¢ƒä¸€æ ·ï¼Œå¯¹æ‚¨å¯ä»¥æ„å»ºçš„å†…å®¹è®¾ç½®å¾ˆå°‘çš„é™åˆ¶ã€‚
åœ¨è¿™ä¸ªé¢†åŸŸé‡Œï¼Œå„ç§å„æ ·çš„å‘æ˜éƒ½å¦‚é›¨åæ˜¥ç¬‹èˆ¬æ¶Œç°ã€‚

å¾ˆè®½åˆºçš„æ˜¯ï¼Œæœ¬æ–‡æ¡£æ³è¯·æ‚¨éµå¾ªç°æœ‰æ¨¡å¼ï¼Œå¹¶æä¾›ä¸æ•°åå¹´æ¥å‘½ä»¤è¡Œä¼ ç»Ÿç›¸æ‚–çš„å»ºè®®ã€‚
æˆ‘ä»¬å’Œå…¶ä»–äººä¸€æ ·å¯¹è¿åè§„åˆ™æ„Ÿåˆ°å†…ç–šã€‚

ä½†ä¹Ÿè®¸æ‚¨æ˜¯æ—¶å€™è¯¥æ‰“ç ´è§„çŸ©äº†ã€‚
æœ‰æ˜ç¡®ç›®çš„è¦è¿™æ ·åšã€‚

> â€œå½“ä¸€ä¸ªæ ‡å‡†æ˜æ˜¾æŸå®³äº†ç”Ÿäº§åŠ›æˆ–ç”¨æˆ·æ»¡æ„åº¦æ—¶ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™æ”¾å¼ƒè¿™ä¸ªæ ‡å‡†äº†â€ â€” Jef Raskin, [The Humane Interface](https://en.wikipedia.org/wiki/The_Humane_Interface)

## æŒ‡å— {#guidelines}

ä»¥ä¸‹æ˜¯ä¸€ç³»åˆ—å¯ä»¥ä½¿æ‚¨çš„å‘½ä»¤è¡Œç¨‹åºè¿›ä¸€æ­¥ä¼˜åŒ–çš„ç‰¹å®šæ“ä½œã€‚

ç¬¬ä¸€éƒ¨åˆ†åŒ…å«æ‚¨éœ€è¦éµå¾ªçš„åŸºæœ¬å†…å®¹ã€‚
å¦‚æœè¿™ä¸€éƒ¨åˆ†çŠ¯é”™ï¼Œæ‚¨çš„ç¨‹åºä¼šå¾ˆéš¾ç”¨ã€‚

å…¶ä½™çš„éƒ¨åˆ†ä¹Ÿéƒ½å€¼å¾—å»å­¦ä¹ ã€‚
å¦‚æœæ‚¨æœ‰æ—¶é—´å’Œç²¾åŠ›å»æ·»åŠ è¿™äº›ä¸œè¥¿ï¼Œæ‚¨çš„ç¨‹åºä¼šæ¯”å…¶ä»–ä¸€èˆ¬çš„ç¨‹åºå¥½å¾ˆå¤šã€‚

å¦‚æœæ‚¨ä¸æ‰“ç®—èŠ±å¤ªå¤šç²¾åŠ›åœ¨ç¨‹åºçš„è®¾è®¡ä¸Šï¼Œé‚£ä¹ˆï¼šåªéœ€éµå¾ªè¿™äº›è§„åˆ™ï¼Œæ‚¨çš„ç¨‹åºå°±å¯èƒ½å¾ˆå¥½ã€‚ 
å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‚¨è€ƒè™‘è¿‡å¹¶ç¡®å®šä»¥ä¸‹è§„åˆ™å¯¹æ‚¨çš„ç¨‹åºæ˜¯é”™è¯¯çš„ï¼Œé‚£ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚
(æ²¡æœ‰ä¸€ä¸ªæƒå¨ä¼šå› ä¸ºæ²¡æœ‰éµå¾ªä»»æ„è§„åˆ™è€Œæ‹’ç»æ‚¨çš„ç¨‹åºã€‚)

å¦å¤–ï¼Œè¿™äº›è§„åˆ™ä¸æ˜¯ä¸€æˆä¸å˜çš„ã€‚
å¦‚æœæ‚¨æœ‰å……åˆ†çš„ç†ç”±ä¸åŒæ„è¿™äº›è§„åˆ™ï¼Œæ‚¨å¯ä»¥[æå‡ºå»ºè®®](https://github.com/cli-guidelines/cli-guidelines).

### åŸºç¡€ {#the-basics}

è¿™é‡Œæœ‰ä¸€äº›æ‚¨éœ€è¦éµå®ˆçš„åŸºæœ¬è§„åˆ™ã€‚
å¼„é”™è¿™äº›ï¼Œæ‚¨çš„ç¨‹åºè¦ä¹ˆä½¿ç”¨ä½“éªŒå¾ˆå·®ï¼Œè¦ä¹ˆå°±ä¼šå½»åº•å´©æºƒã€‚

**è¯·å°½é‡ä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°è§£æåº“.**
å‘½ä»¤è¡Œå‚æ•°è§£æåº“è¦ä¹ˆæ˜¯è¯­è¨€å†…ç½®çš„ï¼Œè¦ä¹ˆæ˜¯ä¼˜ç§€çš„ç¬¬ä¸‰æ–¹è§£æåº“ã€‚
è¿™äº›è§£æåº“é€šå¸¸ä¼šä»¥ä¸€ç§åˆç†çš„æ–¹å¼å¤„ç†å‚æ•°ã€è§£æé€‰é¡¹ã€æä¾›å¸®åŠ©æ–‡æœ¬ï¼Œç”šè‡³æ‹¼å†™å»ºè®®ã€‚

ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„è§£æåº“ï¼š
* Go: [Cobra](https://github.com/spf13/cobra), [cli](https://github.com/urfave/cli)
* Java: [picocli](https://picocli.info/)
* Node: [oclif](https://oclif.io/)
* Python: [Click](https://click.palletsprojects.com/), [Typer](https://github.com/tiangolo/typer)
* Ruby: [TTY](https://ttytoolkit.org/)
* Rust: [clap](https://clap.rs/), [structopt](https://github.com/TeXitoi/structopt)
* PHP: [console](https://github.com/symfony/console)

**æˆåŠŸæ—¶è¿”å› 0 é€€å‡ºç ï¼Œå¤±è´¥æ—¶è¿”å›é 0 é€€å‡ºç .**
é€€å‡ºç æ˜¯æè¿°ä¸€ä¸ªç¨‹åºæ‰§è¡ŒæˆåŠŸè¿˜æ˜¯å¤±è´¥çš„æ–¹å¼ï¼Œå› æ­¤æ‚¨åº”è¯¥æ­£ç¡®åœ°æŠ¥å‘Šè¿™ä¸€ç‚¹ã€‚
æ­¤å¤–ï¼Œåº”å°†é 0 çš„é€€å‡ºç åº”è¯¥æ˜ å°„åˆ°æœ€é‡è¦çš„å¤±è´¥æ¨¡å¼ã€‚

**å°† output å‘é€åˆ° `stdout`.**
æ‚¨å‘½ä»¤çš„ä¸»è¦çš„ output åº”è¯¥æ˜¯ `stdout`ã€‚
ä»»ä½•æœºå™¨å¯è¯»çš„å†…å®¹ä¹Ÿåº”è¯¥è½¬åˆ° `stdout` â€”è¿™æ˜¯ç®¡é“é»˜è®¤å‘é€çš„åœ°æ–¹ã€‚

**å°† messaging å‘é€åˆ° `stderr`.**
æ—¥å¿—æ¶ˆæ¯ï¼Œé”™è¯¯ç­‰éƒ½åº”å‘é€åˆ° `stderr`ã€‚
è¿™æ„å‘³ç€å½“å‘½ä»¤é€šè¿‡ç®¡é“ä¼ è¾“æ—¶ï¼Œè¿™äº›æ¶ˆæ¯å°†æ˜¾ç¤ºç»™ç”¨æˆ·ï¼Œè€Œä¸æ˜¯é¦ˆå…¥ä¸‹ä¸€ä¸ªå‘½ä»¤ã€‚

### å¸®åŠ© {#help}

**å½“å‘½ä»¤çš„è°ƒç”¨æ²¡æœ‰ä¼ å…¥ä»»ä½• option æ—¶, æˆ–è€…ç”¨æˆ·è¾“å…¥ `-h`, æˆ– `--help` æ—¶, æ˜¾ç¤ºå¸®åŠ©æ–‡æœ¬.**

**é»˜è®¤æ˜¾ç¤ºç²¾ç®€çš„å¸®åŠ©æ–‡æœ¬ã€‚**
å¦‚æœå¯ä»¥ï¼Œå°½é‡åœ¨è¿è¡Œ `myapp` æˆ– `myapp subcommand` æ—¶æ˜¾ç¤ºå¸®åŠ©æ–‡æœ¬ã€‚
é™¤éæ‚¨çš„åº”ç”¨ç¨‹åºéå¸¸ç®€å•ï¼Œå¹¶ä¸”é»˜è®¤æƒ…å†µä¸‹ä¼šæ‰§è¡Œæ˜ç¡®çš„æ“ä½œ (e.g. `ls`ï¼Œæˆ–è€…æ‚¨çš„ç¨‹åºæ˜¯äº¤äº’å¼è¯»å–è¾“å…¥çš„ (e.g. `cat`)ã€‚

ç²¾ç®€çš„å¸®åŠ©æ–‡æœ¬åº”è¯¥åªåŒ…å«:

- æœ‰å…³ç¨‹åºåŠŸèƒ½çš„è¯´æ˜ã€‚
- ä¸€åˆ°ä¸¤ä¸ªè°ƒç”¨ç¤ºä¾‹ã€‚
- é€‰é¡¹çš„æè¿°ï¼Œé™¤éæœ‰å¾ˆå¤šé€‰é¡¹ã€‚
- æç¤ºé€šè¿‡ `--help` å¯ä»¥è·å–æ›´å¤šä¿¡æ¯ã€‚

`jq` æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å…¸èŒƒã€‚
å½“æ‚¨è¾“å…¥ `jq` æ—¶ï¼Œä¼šæ˜¾ç¤ºæè¿°ä¿¡æ¯å’Œä½¿ç”¨ç¤ºä¾‹ï¼Œç„¶åæç¤ºæ‚¨å¯ä»¥é€šè¿‡ `jq --help` è·å–å®Œæ•´çš„é€‰é¡¹åˆ—è¡¨ï¼š

```
$ jq
jq - commandline JSON processor [version 1.6]

Usage:
    jq [options] <jq filter> [file...]
    jq [options] --args <jq filter> [strings...]
    jq [options] --jsonargs <jq filter> [JSON_TEXTS...]

jq is a tool for processing JSON inputs, applying the given filter to
its JSON text inputs and producing the filter's results as JSON on
standard output.

The simplest filter is ., which copies jq's input to its output
unmodified (except for formatting, but note that IEEE754 is used
for number representation internally, with all that that implies).

For more advanced filters see the jq(1) manpage ("man jq")
and/or https://stedolan.github.io/jq

Example:

    $ echo '{"foo": 0}' | jq .
    {
        "foo": 0
    }

For a listing of options, use jq --help.
```

**é€šè¿‡ `-h` å’Œ `--help` æ˜¾ç¤ºå®Œæ•´çš„å¸®åŠ©æ–‡æœ¬.**
ä»¥ä¸‹çš„è¾“å…¥éƒ½åº”è¯¥æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯:

```
$ myapp
$ myapp --help
$ myapp -h
```

å¦‚æœä¸€äº› flag å’Œ argument æ²¡æœ‰å‡ºç°åœ¨é»˜è®¤å¸®åŠ©æ–‡æœ¬ä¸­ï¼Œé‚£ä¹ˆåº”è¯¥å¯ä»¥åœ¨è¯¥ flag æˆ– argument çš„åé¢é€šè¿‡ `-h` è·å–è¯¥ flag æˆ– argument çš„å¸®åŠ©ä¿¡æ¯ã€‚

å¦‚æœæ‚¨çš„ç¨‹åºæ˜¯ `git-like` ç¨‹åºï¼Œä»¥ä¸‹çš„æƒ…å†µä¹Ÿåº”æä¾›å¸®åŠ©æ–‡æœ¬ï¼š

```
$ myapp help
$ myapp help subcommand
$ myapp subcommand --help
$ myapp subcommand -h
```

**æä¾› feedback å’Œ issues çš„é€”å¾„.**
ä¸€ä¸ªç½‘ç«™æˆ– GitHub é“¾æ¥å‡ºç°åœ¨é¡¶çº§å¸®åŠ©æ–‡æœ¬ä¸­ï¼Œè¿™æ˜¯å¾ˆå¸¸è§çš„åšæ³•ã€‚

**åœ¨å¸®åŠ©æ–‡æœ¬ä¸­æä¾› Web ç‰ˆçš„æ–‡æ¡£é“¾æ¥.**
å¦‚æœæ‚¨æœ‰å…³äºå­å‘½ä»¤çš„ç‰¹å®šè¯´æ˜é¡µé¢æˆ–é”šç‚¹ï¼Œé‚£å°±ç›´æ¥åŠ å…¥åˆ°å¸®åŠ©ä¸­ã€‚
å¦‚æœåœ¨ Web ä¸Šæœ‰æ›´è¯¦ç»†çš„è¯´æ˜æ–‡æ¡£ï¼Œæˆ–è€…å¯¹ä¸€äº›å‘½ä»¤å‚æ•°è¿›è¡Œè¿›ä¸€æ­¥è§£é‡Šï¼Œåˆ™æ­¤åŠŸèƒ½ç‰¹åˆ«æœ‰ç”¨ã€‚

**æä¾›ä½¿ç”¨ç¤ºä¾‹.**
ç”¨æˆ·å€¾å‘äºä½¿ç”¨ç¤ºä¾‹è€Œä¸æ˜¯å…¶ä»–å½¢å¼çš„æ–‡æ¡£ï¼Œå› æ­¤è¯·é¦–å…ˆåœ¨å¸®åŠ©é¡µé¢ä¸­æ˜¾ç¤ºä½¿ç”¨ç¤ºä¾‹ï¼Œå°¤å…¶æ˜¯å¸¸è§çš„ä¸€äº›ç”¨æ³•ã€‚åŒæ—¶ï¼Œä¹Ÿå¯ä»¥è¿›ä¸€æ­¥è§£é‡Šæ­¤ç¤ºä¾‹çš„åŠŸèƒ½ã€‚

æ‚¨å¯ä»¥é€šè¿‡ä¸€ç³»åˆ—ç¤ºä¾‹ä¸ºå¤æ‚çš„ä½¿ç”¨æ‰“ä¸‹åŸºç¡€ã€‚
<!-- TK example? -->

**å¦‚æœæ‚¨æœ‰å¤§é‡ç¤ºä¾‹ï¼Œè¯·å°†å®ƒä»¬æ”¾åœ¨å…¶ä»–åœ°æ–¹,** ä¾‹å¦‚ Web ä¸Š.
æ‹¥æœ‰è¯¦å°½çš„é«˜çº§ç¤ºä¾‹å¾ˆæœ‰å¸®åŠ©ï¼Œä½†æ˜¯æœ€å¥½ä¸è¦è®©å¸®åŠ©æ–‡æœ¬å¤ªé•¿ã€‚

å¯¹äºæ›´å¤æ‚çš„ç”¨ä¾‹ï¼Œä¾‹å¦‚ä¸éœ€è¦ä¸å…¶ä»–å·¥å…·é›†æˆï¼Œæ‚¨å¯èƒ½éœ€è¦ç¼–å†™å®Œæ•´çš„æ•™ç¨‹ã€‚

**ä¸è¦å»ç®¡ man page.**
å¦‚æœæ‚¨éµå¾ªè¿™äº›å‡†åˆ™æä¾›æ–‡æ¡£å’Œå¸®åŠ©ï¼Œé‚£ä¹ˆæ ¹æœ¬å°±ä¸éœ€è¦ man pageã€‚
æ²¡æœ‰å¤šå°‘äººä½¿ç”¨ man pageï¼Œå¹¶ä¸” man page åœ¨ Windows ä¸Šä¹Ÿæ— æ³•ä½¿ç”¨ã€‚
å¦‚æœæ‚¨çš„ CLI æ¡†æ¶å’Œç¨‹åºåŒ…ç®¡ç†å™¨ä½¿è¾“å‡º man page å˜å¾—å¾ˆå®¹æ˜“ï¼Œé‚£ä¹ˆå¯ä»¥åŠ å…¥ man pageï¼Œå¦åˆ™ï¼Œæ‚¨æœ€å¥½æŠŠæ—¶é—´ç”¨åœ¨æ”¹è¿› Web æ–‡æ¡£å’Œå†…ç½®å¸®åŠ©æ–‡æœ¬ä¸Šå»ã€‚

_å¼•ç”¨: [12 Factor CLI Apps](https://medium.com/@jdxcode/12-factor-cli-apps-dd3c227a0e46)._

**å¦‚æœæ‚¨çš„å¸®åŠ©æ–‡æœ¬é•¿, é€šè¿‡ç®¡é“è¾“å…¥åˆ°åˆ†é¡µå·¥å…·é‡Œå».**
`man` å°±æ˜¯è¿™ä¹ˆåšçš„ã€‚
å‚è§ä¸‹é¢çš„â€œè¾“å‡ºâ€ä¸€ç« ã€‚

**åœ¨å¸®åŠ©æ–‡æœ¬çš„å¼€å¤´æ˜¾ç¤ºæœ€å¸¸ç”¨çš„ flags å’Œ commands.**
å½“æœ‰è®¸å¤š flags çš„æ—¶å€™ï¼Œé¦–å…ˆæ˜¾ç¤ºæœ€å¸¸ç”¨çš„éƒ¨åˆ† flagsã€‚
ä¾‹å¦‚ï¼ŒGit å‘½ä»¤é¦–å…ˆæ˜¾ç¤ºç”¨äºå…¥é—¨çš„å‘½ä»¤ä»¥åŠæœ€å¸¸ç”¨çš„å­å‘½ä»¤ï¼š

```
$ git
usage: git [--version] [--help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           <command> [<args>]

These are common Git commands used in various situations:

start a working area (see also: git help tutorial)
   clone      Clone a repository into a new directory
   init       Create an empty Git repository or reinitialize an existing one

work on the current change (see also: git help everyday)
   add        Add file contents to the index
   mv         Move or rename a file, a directory, or a symlink
   reset      Reset current HEAD to the specified state
   rm         Remove files from the working tree and from the index

examine the history and state (see also: git help revisions)
   bisect     Use binary search to find the commit that introduced a bug
   grep       Print lines matching a pattern
   log        Show commit logs
   show       Show various types of objects
   status     Show the working tree status
â€¦
```

**åœ¨å¸®åŠ©æ–‡æœ¬ä¸­ä½¿ç”¨ä¸åŒæ ¼å¼.**
åŠ ç²—çš„æ ‡é¢˜èƒ½å¤Ÿæ›´åŠ å®¹æ˜“è¢«å‘ç°ã€‚
ä½†æ˜¯ï¼Œåº”å°½é‡ä»¥ç‹¬ç«‹äºç»ˆç«¯çš„æ–¹å¼è¿›è¡Œï¼Œè¿™æ ·ç”¨æˆ·å°±ä¸ä¼šç›¯ç€ä¸€å †è½¬ä¹‰å­—ç¬¦äº†ã€‚

<pre>
<code>
<strong>$ heroku apps --help</strong>
list your apps

<strong>USAGE</strong>
  $ heroku apps

<strong>OPTIONS</strong>
  -A, --all          include apps in all teams
  -p, --personal     list apps in personal account when a default team is set
  -s, --space=space  filter by space
  -t, --team=team    team to use
  --json             output in json format

<strong>EXAMPLES</strong>
  $ heroku apps
  === My Apps
  example
  example2

  === Collaborated Apps
  theirapp   other@owner.name

<strong>COMMANDS</strong>
  apps:create     creates a new app
  apps:destroy    permanently destroy an app
  apps:errors     view app errors
  apps:favorites  list favorited apps
  apps:info       show detailed app information
  apps:join       add yourself to a team app
  apps:leave      remove yourself from a team app
  apps:lock       prevent team members from joining an app
  apps:open       open the app in a web browser
  apps:rename     rename an app
  apps:stacks     show the list of available stacks
  apps:transfer   transfer applications to another user or team
  apps:unlock     unlock an app so any team member can join
</code>
</pre>

Note: When `heroku apps --help` is piped through a pager, the command emits no escape characters.

**å¦‚æœç”¨æˆ·è¿›è¡Œäº†é”™è¯¯æ“ä½œï¼Œæ‚¨å¯ä»¥çŒœæµ‹ç”¨æˆ·æƒ³è¦åšä»€ä¹ˆï¼Œå¹¶æå‡ºå»ºè®®.**
æ¯”å¦‚, `brew update jq` å‘Šè¯‰ç”¨æˆ·åº”è¯¥è¿è¡Œ `brew upgrade jq`.

æ‚¨å¯ä»¥è¯¢é—®ç”¨æˆ·æ˜¯å¦æƒ³è¿è¡Œå»ºè®®çš„å‘½ä»¤ï¼Œä½†ä¸è¦å¼ºè¿«ä»–ä»¬è¿™æ ·åšã€‚
æ¯”å¦‚:

```
$ heroku pss
 â€º   Warning: pss is not a heroku command.
Did you mean ps? [y/n]:
```

æ‚¨å¯èƒ½ä¼šæƒ³ï¼Œä¸å…¶å»ºè®®ä»–ä»¬ä½¿ç”¨æ­£ç¡®çš„è¯­æ³•ï¼Œä¸å¦‚ç›´æ¥ä¸ºä»–ä»¬è¿è¡Œï¼Œå°±å¥½åƒä»–ä»¬ä¸€å¼€å§‹å°±æ‰“å¯¹äº†ä¸€æ ·ã€‚
æœ‰æ—¶è¿™æ˜¯æ­£ç¡®çš„ï¼Œä½†å¹¶ä¸æ€»æ˜¯è¿™æ ·ã€‚

é¦–å…ˆï¼Œæ— æ•ˆçš„è¾“å…¥å¹¶ä¸ä¸€å®šæ„å‘³ç€ç®€å•çš„é”®å…¥é”™è¯¯--å®ƒå¾€å¾€æ„å‘³ç€ç”¨æˆ·çŠ¯äº†ä¸€ä¸ªé€»è¾‘é”™è¯¯ï¼Œæˆ–è€…è¯¯ç”¨äº†ä¸€ä¸ª shell å˜é‡ã€‚
è¦å‡è®¾ç”¨æˆ·çš„æ„å›¾å¯èƒ½æ˜¯å±é™©çš„ï¼Œç‰¹åˆ«æ˜¯å¦‚æœç”±æ­¤äº§ç”Ÿçš„æ“ä½œä¿®æ”¹äº†ç›¸å…³çŠ¶æ€ã€‚

å…¶æ¬¡ï¼Œè¦æ³¨æ„ï¼Œå¦‚æœæ‚¨æ”¹å˜äº†ç”¨æˆ·è¾“å…¥çš„å†…å®¹ï¼Œä»–ä»¬å°±ä¸ä¼šå­¦ä¹ åˆ°æ­£ç¡®çš„è¯­æ³•ã€‚
å®é™…ä¸Šï¼Œæ‚¨æ˜¯åœ¨è£å®šä»–ä»¬è¾“å…¥çš„æ–¹å¼æ˜¯å¦æœ‰æ•ˆå’Œæ­£ç¡®ï¼Œè€Œä¸”æ‚¨æ‰¿è¯ºå°†æ— é™æœŸåœ°æ”¯æŒè¿™ç§æ–¹å¼ã€‚
åœ¨åšå‡ºè¿™ä¸ªå†³å®šæ—¶ï¼Œè¦æœ‰æ„è¯†åœ°è®°å½•ä¸¤ç§è¯­æ³•ã€‚

_Further reading: [â€œDo What I Meanâ€](http://www.catb.org/~esr/jargon/html/D/DWIM.html)_

**å¦‚æœæ‚¨çš„å‘½ä»¤å¸Œæœ›æœ‰ä¸œè¥¿è¢« pipe åˆ°å®ƒé‚£é‡Œï¼Œä¸” `stdin` æ˜¯ä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯ï¼Œè¯·ç«‹å³æ˜¾ç¤ºå¸®åŠ©å¹¶é€€å‡º.**
è¿™æ„å‘³ç€å®ƒä¸æ˜¯ä¸€ç›´åœ¨æŒ‚èµ·, åƒ `cat` é‚£æ ·.
å¦å¤–ï¼Œæ‚¨å¯ä»¥æ‰“å°ä¸€æ¡æ—¥å¿—ä¿¡æ¯åˆ° `stderr`.

### æ–‡æ¡£ {#documentation}

[å¸®åŠ©æ–‡æœ¬](#help)çš„ç›®çš„æ˜¯ç»™äººä¸€ç§ç®€çŸ­ã€ç›´æ¥çš„æ„Ÿè§‰ï¼Œè®©äººçŸ¥é“æ‚¨çš„å·¥å…·æ˜¯ä»€ä¹ˆï¼Œæœ‰å“ªäº›é€‰é¡¹ï¼Œä»¥åŠå¦‚ä½•æ‰§è¡Œæœ€å¸¸è§çš„ä»»åŠ¡ã€‚
å¦ä¸€æ–¹é¢ï¼Œæ–‡æ¡£æ˜¯æ·±å…¥äº†è§£å…¨éƒ¨ç»†èŠ‚çš„åœ°æ–¹ã€‚
äººä»¬å¯ä»¥é€šè¿‡æ–‡æ¡£æ¥äº†è§£æ‚¨çš„å·¥å…·å¯ä»¥ç”¨æ¥åšä»€ä¹ˆï¼Œä¸å¯ä»¥åšä»€ä¹ˆï¼Œå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠä½¿ç”¨å…¨éƒ¨åŠŸèƒ½çš„æ–¹æ³•ã€‚ 

**æä¾› Web æ–‡æ¡£.**
äººä»¬å¯ä»¥é€šè¿‡æœç´¢å¼•æ“æ¥æŸ¥è¯¢åˆ°æ‚¨æä¾›çš„æ–‡æ¡£ï¼Œå¹¶èƒ½å¤Ÿé€šè¿‡ç´¢å¼•é“¾æ¥åˆ°ç‰¹å®šçš„éƒ¨åˆ†ã€‚Web æ–‡æ¡£æ˜¯ç›®å‰æœ€å…·åŒ…å®¹æ€§çš„æ–‡æ¡£æ ¼å¼ã€‚

**æä¾›ç»ˆç«¯æ–‡æ¡£.**
ç»ˆç«¯æ–‡æ¡£æœ‰å‡ ä¸ªä¸é”™çš„ç‰¹æ€§ï¼šè®¿é—®é€Ÿåº¦å¿«ï¼Œä¸å·¥å…·çš„å®‰è£…ç‰ˆæœ¬ä¿æŒåŒæ­¥ï¼Œè€Œä¸”ä¸éœ€è¦äº’è”ç½‘è¿æ¥ä¹Ÿèƒ½å·¥ä½œã€‚

**è€ƒè™‘æ˜¯å¦æä¾› man pages.**
[man pages](https://en.wikipedia.org/wiki/Man_page), Unix æœ€åˆçš„æ–‡æ¡£ç³»ç»Ÿ, è‡³ä»Šä»åœ¨ä½¿ç”¨, è®¸å¤šç”¨æˆ·åœ¨å°è¯•äº†è§£æ‚¨çš„å·¥å…·æ—¶ä¼šåå°„æ€§åœ°æŸ¥çœ‹ `man mycmd`.
ä¸ºäº†è®© man pages è·Ÿå®¹æ˜“ç”Ÿæˆï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå·¥å…·[ronn](http://rtomayko.github.io/ronn/ronn.1.html)ï¼ˆå®ƒä¹Ÿå¯ä»¥å¸®åŠ©æ‚¨è‡ªåŠ¨ç”Ÿæˆ Web æ–‡æ¡£ï¼‰

ç„¶è€Œï¼Œä¸æ˜¯æ¯ä¸ªäººéƒ½çŸ¥é“ `man`ï¼Œè€Œä¸” `man` ä¹Ÿå¹¶éåœ¨å…¨å¹³å°éƒ½å¯ä»¥è¿è¡Œï¼Œæ‰€ä»¥æ‚¨åº”è¯¥ç¡®ä¿ç»ˆç«¯æ–‡æ¡£åŒæ ·å¯ä»¥è·å–åˆ°ã€‚
æ¯”å¦‚ï¼Œ`git` å’Œ `npm` å¯ä»¥é€šè¿‡ `help` å­å‘½ä»¤è·å–åˆ° man pagesï¼Œå› æ­¤ `npm help ls` ç­‰åŒäº `man npm-ls`ã€‚

```
NPM-LS(1)                                                            NPM-LS(1)

NAME
       npm-ls - List installed packages

SYNOPSIS
         npm ls [[<@scope>/]<pkg> ...]

         aliases: list, la, ll

DESCRIPTION
       This command will print to stdout all the versions of packages that are
       installed, as well as their dependencies, in a tree-structure.

       ...
```

### è¾“å‡º {#output}

**äººç±»å¯è¯»çš„è¾“å‡ºæ˜¯è‡³å…³é‡è¦çš„.**
è¦æŠŠäººæ”¾åœ¨é¦–ä½ï¼Œæœºå™¨æ”¾åœ¨ç¬¬äºŒä½ã€‚
å¯¹äºä¸€ä¸ªç‰¹å®šçš„è¾“å‡ºæµ(`stdout` or `stderr`)ï¼Œè¦åˆ¤æ–­å®ƒæ˜¯å¦è¢«äººç±»è¯»å–ï¼Œæœ€ç®€å•ä¸”ç›´æ¥çš„å¯å‘æ–¹æ³•æ˜¯çœ‹å®ƒ _æ˜¯å¦æ˜¯ä¸€ä¸ª TTY_.

_Further reading on [what a TTY is](https://unix.stackexchange.com/a/4132)._

**åœ¨ä¸å½±å“å¯ç”¨æ€§çš„åœ°æ–¹è¦æœ‰æœºå™¨å¯è¯»çš„è¾“å‡º.**
æ–‡æœ¬æµæ˜¯ UNIX ä¸­çš„é€šç”¨æ¥å£ã€‚
ç¨‹åºé€šå¸¸ä¼šè¾“å‡ºæ–‡æœ¬è¡Œï¼Œè€Œç¨‹åºé€šå¸¸å¸Œæœ›æœ‰æ–‡æœ¬è¡Œä½œä¸ºè¾“å…¥ï¼Œ
å› æ­¤æ‚¨å¯ä»¥æŠŠå¤šä¸ªç¨‹åºç¼–ç»‡åœ¨ä¸€èµ·ã€‚
è¿™æ ·åšé€šå¸¸æ˜¯ä¸ºäº†è®©ç¼–å†™è„šæœ¬æˆä¸ºå¯èƒ½ï¼Œ
ä½†å®ƒä¹Ÿæœ‰åŠ©äºäººç±»ä½¿ç”¨ç¨‹åºçš„æ˜“ç”¨æ€§ã€‚
æ¯”å¦‚ï¼Œç”¨æˆ·åº”è¯¥èƒ½å¤Ÿç”¨ç®¡é“è¾“å‡ºåˆ° `grep`ï¼Œå®ƒåº”è¯¥åšä»–ä»¬æ‰€æœŸæœ›çš„äº‹æƒ…ã€‚

> â€œExpect the output of every program to become the input to another, as yet unknown, program.â€
â€” [Doug McIlroy](https://homepage.cs.uri.edu/~thenry/resources/unix_art/ch01s06.html)

**å¦‚æœäººç±»å¯è¯»çš„è¾“å‡ºç ´åäº†æœºå™¨å¯è¯»çš„è¾“å‡ºï¼Œè¯·ä½¿ç”¨ `--plain` ä»¥çº¯è¡¨æ ¼æ–‡æœ¬æ ¼å¼æ˜¾ç¤ºè¾“å‡ºï¼Œä»¥ä¾¿ä¸ `grep` æˆ– `awk` ç­‰å·¥å…·é›†æˆã€‚**
åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½éœ€è¦ä»¥ä¸åŒçš„æ–¹å¼è¾“å‡ºä¿¡æ¯ä»¥ä½¿å…¶æ˜“äºé˜…è¯»ã€‚
ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨æ­£åœ¨æ˜¾ç¤ºä¸€ä¸ªåŸºäºè¡Œçš„è¡¨æ ¼ï¼Œæ‚¨å¯èƒ½ä¼šé€‰æ‹©å°†ä¸€ä¸ªå•å…ƒæ ¼åˆ†æˆå¤šè¡Œï¼Œä»¥é€‚åº”æ›´å¤šä¿¡æ¯ï¼ŒåŒæ—¶å°†å…¶ä¿æŒåœ¨å±å¹•å®½åº¦å†…ã€‚
ä½†è¿™æ‰“ç ´äº†æ¯è¡Œä¸€æ¡æ•°æ®çš„é¢„æœŸè¡Œä¸ºï¼Œå› æ­¤æ‚¨åº”è¯¥ä¸ºè„šæœ¬æä¾›ä¸€ä¸ª `--plain` é€‰é¡¹ï¼Œå®ƒå¯ä»¥ç¦ç”¨æ‰€æœ‰æ­¤ç±»æ“ä½œå¹¶æ¯è¡Œè¾“å‡ºä¸€æ¡è®°å½•ã€‚

**å¦‚æœè¢«ä¼ å…¥ `--json` ï¼Œåˆ™è¾“å‡ºæ˜¾ç¤ºä¸ºæ ¼å¼åŒ–çš„ JSONã€‚.**
JSON æ¯”çº¯æ–‡æœ¬æœ‰æ›´å¤šçš„ç»“æ„ï¼Œæ‰€ä»¥å®ƒèƒ½å¤Ÿæ›´å®¹æ˜“è¾“å‡ºå’Œå¤„ç†å¤æ‚çš„æ•°æ®ç»“æ„ã€‚
[`jq`](https://stedolan.github.io/jq/) æ˜¯åœ¨å‘½ä»¤è¡Œä¸­å¤„ç† JSON çš„å¸¸ç”¨å·¥å…·, ç°åœ¨å…·æœ‰ä¸€ä¸ª[å®Œæ•´çš„å·¥å…·ç”Ÿæ€ç³»ç»Ÿ](https://ilya-sher.org/2018/04/10/list-of-json-tools-for-command-line/) å¯ä»¥è¾“å‡ºå’Œæ“ä½œ JSON.

å®ƒåœ¨ Web ä¸Šä¹Ÿè¢«å¹¿æ³›ä½¿ç”¨ï¼Œå› æ­¤é€šè¿‡ä½¿ç”¨ JSON ä½œä¸ºç¨‹åºçš„è¾“å…¥å’Œè¾“å‡ºï¼Œä½¿æ‚¨å¯ä»¥ä½¿ç”¨ `curl` ç›´æ¥ä¸ Web æœåŠ¡è¿›è¡Œç®¡é“ä¼ è¾“ã€‚

**æˆåŠŸæ—¶æ˜¾ç¤ºè¾“å‡ºï¼Œä½†è¦ä¿æŒç®€çŸ­.**
ä¼ ç»Ÿä¸Šï¼Œå½“ä¸€åˆ‡æ­£å¸¸æ—¶ï¼ŒUNIX å‘½ä»¤ä¸ä¼šå‘ç”¨æˆ·æ˜¾ç¤ºä»»ä½•è¾“å‡ºã€‚ 
è¿™åœ¨è„šæœ¬ä¸­æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†åœ¨è¢«äººç±»ä½¿ç”¨æ—¶å¯èƒ½ä¼šä½¿å‘½ä»¤çœ‹èµ·æ¥æŒ‚èµ·æˆ–æŸåã€‚ ä¾‹å¦‚ï¼Œ`cp` ä¸ä¼šæ‰“å°ä»»ä½•å†…å®¹ï¼Œå³ä½¿å®ƒéœ€è¦å¾ˆé•¿æ—¶é—´ã€‚

ä»€ä¹ˆéƒ½ä¸æ‰“å°æ˜¯æœ€å¥½çš„é»˜è®¤è¡Œä¸ºï¼Œè¿™ç§åšæ³•æ˜¯å°‘è§çš„ï¼Œä½†æ˜¯å¯¹äºé”™è¯¯ä¿¡æ¯æ¥è¯´ï¼Œè¿™ç§è¡Œä¸ºæ˜¯å¸¸è§çš„ã€‚

å¯¹äºä¸éœ€è¦è¾“å‡ºçš„æƒ…å†µï¼ˆä¾‹å¦‚ï¼Œåœ¨ shell è„šæœ¬ä¸­ä½¿ç”¨æ—¶ï¼‰ï¼Œä¸ºäº†é¿å…å°† `stderr` ç¬¨æ‹™åœ°é‡å®šå‘åˆ° `/dev/null`ï¼Œæ‚¨å¯ä»¥æä¾›ä¸€ä¸ª `-q` é€‰é¡¹æ¥æŠ‘åˆ¶æ‰€æœ‰éå¿…è¦çš„è¾“å‡ºã€‚

**å¦‚æœçŠ¶æ€æ”¹å˜äº†ï¼Œè¯·å‘Šè¯‰ç”¨æˆ·.**
å½“å‘½ä»¤æ”¹å˜äº†ç³»ç»ŸçŠ¶æ€æ—¶ï¼Œè§£é‡Šåˆšåˆšå‘ç”Ÿçš„äº‹æƒ…ç‰¹åˆ«æœ‰å¿…è¦ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥åœ¨è„‘æµ·ä¸­å¯¹ç³»ç»ŸçŠ¶æ€è¿›è¡Œå»ºæ¨¡â€”â€”ç‰¹åˆ«æ˜¯å¦‚æœç»“æœæ²¡æœ‰ç›´æ¥æ˜ å°„åˆ°ç”¨æˆ·è¯·æ±‚å†…å®¹çš„æƒ…å†µã€‚

æ¯”å¦‚ï¼Œ`git push` å¯ä»¥å‡†ç¡®åœ°å‘Šè¯‰ç”¨æˆ·ç›®å‰åœ¨åšä»€ä¹ˆï¼Œä»¥åŠè¿œç¨‹åˆ†æ”¯çš„æœ€æ–°çŠ¶æ€ï¼š

```
$ git push
Enumerating objects: 18, done.
Counting objects: 100% (18/18), done.
Delta compression using up to 8 threads
Compressing objects: 100% (10/10), done.
Writing objects: 100% (10/10), 2.09 KiB | 2.09 MiB/s, done.
Total 10 (delta 8), reused 0 (delta 0), pack-reused 0
remote: Resolving deltas: 100% (8/8), completed with 8 local objects.
To github.com:replicate/replicate.git
 + 6c22c90...a2a5217 bfirsh/fix-delete -> bfirsh/fix-delete
```

**è®©æŸ¥çœ‹ç³»ç»Ÿçš„å½“å‰çŠ¶æ€æ›´åŠ å®¹æ˜“.**
å¦‚æœæ‚¨çš„ç¨‹åºè¿›è¡Œäº†å¾ˆå¤šå¤æ‚çš„çŠ¶æ€å˜åŒ–ï¼Œè€Œä¸”åœ¨æ–‡ä»¶ç³»ç»Ÿä¸­ä¸èƒ½ç«‹å³çœ‹åˆ°ï¼Œè¯·ç¡®ä¿èƒ½å¤Ÿä½¿ä¹‹æ˜“äºæŸ¥çœ‹ã€‚

æ¯”å¦‚, `git status` èƒ½å¤Ÿå‘Šè¯‰æ‚¨å°½å¯èƒ½å¤šçš„å…³äº Git ä»“åº“å½“å‰çŠ¶æ€çš„ä¿¡æ¯ï¼Œä»¥åŠå¦‚ä½•ä¿®æ”¹è¿™äº›çŠ¶æ€çš„æç¤ºï¼š

```
$ git status
On branch bfirsh/fix-delete
Your branch is up to date with 'origin/bfirsh/fix-delete'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
	modified:   cli/pkg/cli/rm.go

no changes added to commit (use "git add" and/or "git commit -a")
```

**å»ºè®®ç”¨æˆ·åº”è¯¥è¿è¡Œçš„å‘½ä»¤.**
å½“å¤šä¸ªå‘½ä»¤å½¢æˆä¸€ä¸ªå·¥ä½œæµæ—¶ï¼Œå‘ç”¨æˆ·å»ºè®®ä»–ä»¬æ¥ä¸‹æ¥å¯ä»¥è¿è¡Œçš„å‘½ä»¤æœ‰åŠ©äºä»–ä»¬å­¦ä¹ å¦‚ä½•ä½¿ç”¨æ‚¨çš„ç¨‹åºå¹¶å‘ç°æ–°åŠŸèƒ½ã€‚
ä¾‹å¦‚ï¼Œåœ¨ä¸Šé¢çš„ `git status` çš„è¾“å‡ºä¸­ï¼Œå‘æ‚¨æå‡ºå¯ä»¥ä¿®æ”¹å½“å‰çŠ¶æ€çš„å‘½ä»¤ã€‚

**è·¨è¶Šç¨‹åºå†…éƒ¨ä¸–ç•Œè¾¹ç•Œçš„åŠ¨ä½œé€šå¸¸åº”è¯¥æ˜¯æ˜ç¡®çš„.**
è¿™åŒ…æ‹¬:

- è¯»å–æˆ–å†™å…¥ç”¨æˆ·æœªæ˜ç¡®ä½œä¸ºå‚æ•°ä¼ é€’çš„æ–‡ä»¶ï¼ˆé™¤éè¿™äº›æ–‡ä»¶æ­£åœ¨å­˜å‚¨å†…éƒ¨ç¨‹åºçŠ¶æ€ï¼Œä¾‹å¦‚ç¼“å­˜ï¼‰ã€‚
- ä¸è¿œç¨‹æœåŠ¡å™¨è¿›è¡Œä¼šè¯ï¼Œä¾‹å¦‚ä¸‹è½½æ–‡ä»¶ã€‚

**å¢åŠ ä¿¡æ¯å¯†åº¦---ä½¿ç”¨ ASCII è‰ºæœ¯ï¼**
ä¾‹å¦‚, `ls` ä»¥ä¸€ç§æ¸…æ™°ä¸”è¯¦ç»†çš„æ–¹å¼æ˜¾ç¤ºæ–‡ä»¶çš„æƒé™.
å½“æ‚¨ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™æ ·çš„è¾“å‡ºæ—¶ï¼Œæ‚¨å¯ä»¥å¿½ç•¥å¤§å¤šæ•°ä¿¡æ¯ã€‚
ç„¶åï¼Œå½“æ‚¨äº†è§£å®ƒçš„å·¥ä½œåŸç†æ—¶ï¼Œæ‚¨ä¼šéšç€æ—¶é—´çš„æ¨ç§»æŒ‘é€‰å‡ºæ›´å¤šçš„æ¨¡å¼ã€‚

```
-rw-r--r-- 1 root root     68 Aug 22 23:20 resolv.conf
lrwxrwxrwx 1 root root     13 Mar 14 20:24 rmt -> /usr/sbin/rmt
drwxr-xr-x 4 root root   4.0K Jul 20 14:51 security
drwxr-xr-x 2 root root   4.0K Jul 20 14:53 selinux
-rw-r----- 1 root shadow  501 Jul 20 14:44 shadow
-rw-r--r-- 1 root root    116 Jul 20 14:43 shells
drwxr-xr-x 2 root root   4.0K Jul 20 14:57 skel
-rw-r--r-- 1 root root      0 Jul 20 14:43 subgid
-rw-r--r-- 1 root root      0 Jul 20 14:43 subuid
```

**æœ‰ç›®çš„åœ°ä½¿ç”¨é¢œè‰².**
ä¾‹å¦‚ï¼Œæ‚¨å¯èƒ½æƒ³çªå‡ºä¸€äº›æ–‡å­—ï¼Œè®©ç”¨æˆ·æ³¨æ„åˆ°å®ƒï¼Œæˆ–è€…ç”¨çº¢è‰²æ¥è¡¨ç¤ºé”™è¯¯ã€‚ä¸è¦è¿‡åº¦ä½¿ç”¨å®ƒ--å¦‚æœæ‰€æœ‰çš„ä¸œè¥¿éƒ½æ˜¯ä¸åŒçš„é¢œè‰²ï¼Œé‚£ä¹ˆè¿™ä¸ªé¢œè‰²å°±æ¯«æ— æ„ä¹‰ï¼Œåªä¼šä½¿å®ƒæ›´éš¾ä»¥é˜…è¯»ã€‚

**å¦‚æœæ‚¨çš„ç¨‹åºä¸åœ¨ç»ˆç«¯ä¸­è¿è¡Œæˆ–ç”¨æˆ·è¯·æ±‚ç¦ç”¨å®ƒï¼Œåˆ™ç¦ç”¨é¢œè‰²ã€‚**
ä¸‹é¢çš„æƒ…å†µéœ€è¦ç¦ç”¨é¢œè‰²:

- `stdout` æˆ– `stderr` ä¸æ˜¯ä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯ (æ˜¯ä¸€ä¸ª TTY).
  æœ€å¥½å•ç‹¬æ£€æŸ¥â€”â€”å¦‚æœæ‚¨å°† `stdout` ä¼ é€åˆ°å¦ä¸€ä¸ªç¨‹åºï¼Œåœ¨ `stderr` ä¸Šè·å–é¢œè‰²ä»ç„¶å¾ˆæœ‰ç”¨ã€‚
- è®¾ç½® `NO_COLOR` ç¯å¢ƒå˜é‡.
- `TERM` ç¯å¢ƒå˜é‡çš„å€¼ä¸º `dumb`.
- ç”¨æˆ·ä¼ å…¥äº†é€‰é¡¹ `--no-color`.
- æ‚¨å¯èƒ½è¿˜æƒ³æ·»åŠ ä¸€ä¸ª `MYAPP_NO_COLOR` ç¯å¢ƒå˜é‡ï¼Œä»¥é˜²ç”¨æˆ·æƒ³è¦ä¸“é—¨ä¸ºæ‚¨çš„ç¨‹åºç¦ç”¨é¢œè‰²ã€‚

_Further reading: [no-color.org](https://no-color.org/), [12 Factor CLI Apps](https://medium.com/@jdxcode/12-factor-cli-apps-dd3c227a0e46)_

**å¦‚æœ `stdout` ä¸æ˜¯äº¤äº’å¼ç»ˆç«¯ï¼Œåˆ™ä¸è¦æ˜¾ç¤ºä»»ä½•åŠ¨ç”».**
è¿™å°†é˜»æ­¢è¿›åº¦æ¡åœ¨ CI æ—¥å¿—è¾“å‡ºä¸­å˜æˆåœ£è¯æ ‘ã€‚

**ä½¿ç”¨ç¬¦å·å’Œ emojiï¼Œå®ƒä½¿äº‹æƒ…å˜å¾—æ›´æ¸…æ™°.**
åœ¨èƒ½ä½¿äº‹æƒ…æ›´æ¸…æ™°çš„åœ°æ–¹ä½¿ç”¨ç¬¦å·å’Œè¡¨æƒ…ç¬¦å·ã€‚å¦‚æœæ‚¨éœ€è¦è®©å‡ ä»¶äº‹æƒ…ä¸ä¼—ä¸åŒï¼Œå¸å¼•ç”¨æˆ·çš„æ³¨æ„åŠ›ï¼Œæˆ–è€…åªæ˜¯å¢åŠ ä¸€ç‚¹ç‰¹è‰²ï¼Œå›¾ç‰‡å¯èƒ½æ¯”æ–‡å­—æ›´å¥½ã€‚ä½†è¦å°å¿ƒï¼Œå¾ˆå®¹æ˜“åšå¾—è¿‡å¤´ï¼Œä½¿æ‚¨çš„ç¨‹åºçœ‹èµ·æ¥æ‚ä¹±æ— ç« æˆ–æ„Ÿè§‰åƒä¸ªç©å…·ã€‚

æ¯”å¦‚, [yubikey-agent](https://github.com/FiloSottile/yubikey-agent) ä½¿ç”¨è¡¨æƒ…ç¬¦å·ä¸ºè¾“å‡ºæ·»åŠ ç»“æ„ï¼Œå› æ­¤å®ƒä¸ä»…ä»…æ˜¯ä¸€å µæ–‡æœ¬å¢™ï¼Œè¿˜æœ‰ä¸€ä¸ª âŒ æ¥å¸å¼•æ‚¨å¯¹é‡è¦ä¿¡æ¯çš„æ³¨æ„:

```shell-session
$ yubikey-agent -setup
ğŸ” The PIN is up to 8 numbers, letters, or symbols. Not just numbers!
âŒ The key will be lost if the PIN and PUK are locked after 3 incorrect tries.

Choose a new PIN/PUK: 
Repeat the PIN/PUK: 

ğŸ§ª Retriculating splines â€¦

âœ… Done! This YubiKey is secured and ready to go.
ğŸ¤ When the YubiKey blinks, touch it to authorize the login.

ğŸ”‘ Here's your new shiny SSH public key:
ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBCEJ/
UwlHnUFXgENO3ifPZd8zoSKMxESxxot4tMgvfXjmRp5G3BGrAnonncE7Aj11pn3SSYgEcrrn2sMyLGpVS0=

ğŸ’­ Remember: everything breaks, have a backup plan for when this YubiKey does.
```

**é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸è¦è¾“å‡ºåªæœ‰è½¯ä»¶ä½œè€…æ‰èƒ½ç†è§£çš„ä¿¡æ¯.**
å¦‚æœä¸€ä¸ªè¾“å‡ºåªæ˜¯ä¸ºäº†å¸®åŠ©æ‚¨ï¼ˆå¼€å‘è€…ï¼‰ç†è§£æ‚¨çš„è½¯ä»¶åœ¨åšä»€ä¹ˆï¼Œé‚£ä¹ˆå‡ ä¹å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œå®ƒä¸åº”è¯¥ä»¥é»˜è®¤çš„æ–¹å¼æ˜¾ç¤ºç»™æ™®é€šç”¨æˆ·ï¼Œè€Œåªæ˜¯åœ¨ verbose æ¨¡å¼ä¸‹ã€‚

é‚€è¯·å±€å¤–äººå’Œæ–°åŠ å…¥æ‚¨çš„é¡¹ç›®çš„äººæä¾›å¯ç”¨æ€§åé¦ˆã€‚
ä»–ä»¬ä¼šå¸®åŠ©æ‚¨çœ‹åˆ°é‚£äº›æ‚¨ç¦»ä»£ç å¤ªè¿‘è€Œæ²¡æœ‰æ³¨æ„åˆ°çš„é‡è¦é—®é¢˜ã€‚

**ä¸è¦å°† `stderr` è§†ä¸ºæ—¥å¿—æ–‡ä»¶ï¼Œè‡³å°‘é»˜è®¤æƒ…å†µä¸‹ä¸è¦è¿™æ ·åšã€‚**
ä¸è¦æ‰“å°æ—¥å¿—çº§åˆ«æ ‡ç­¾ (`ERR`, `WARN`, etc.) æˆ–ä¸ç›¸å¹²çš„ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼Œé™¤éåœ¨ verbose æ¨¡å¼ä¸‹ã€‚

**å¦‚æœè¦è¾“å‡ºå¤§é‡æ–‡æœ¬ï¼Œè¯·ä½¿ç”¨åˆ†é¡µ (e.g. `less`)ã€‚**
æ¯”å¦‚, `git diff` é»˜è®¤åšè¿™ä»¶äº‹ã€‚
ä½¿ç”¨åˆ†é¡µå¯èƒ½å¾ˆå®¹æ˜“å‡ºé”™ï¼Œæ‰€ä»¥è¦æ³¨æ„æ‚¨çš„å®ç°ï¼Œä¸è¦è®©ç”¨æˆ·çš„ä½“éªŒå˜å¾—æ›´ç³Ÿã€‚
å¦‚æœ `stdin` æˆ– `stdout` ä¸æ˜¯ä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯ï¼Œæ‚¨å°±ä¸åº”è¯¥ä½¿ç”¨åˆ†é¡µã€‚

ç”¨äº `less` çš„ä¸€å¥—åˆç†çš„é€‰é¡¹æ˜¯ `less -FIRX`ã€‚å¦‚æœå†…å®¹å æ»¡äº†ä¸€ä¸ªå±å¹•ï¼Œå®ƒå°±ä¸ç¿»é¡µï¼Œæœç´¢æ—¶å¿½ç•¥å¤§å°å†™ï¼Œå¯ç”¨é¢œè‰²å’Œæ ¼å¼åŒ–ï¼Œå¹¶ä¸”åœ¨ `less` é€€å‡ºæ—¶æŠŠå†…å®¹ç•™åœ¨å±å¹•ä¸Šã€‚

åœ¨æ‚¨çš„è¯­è¨€ä¸­ï¼Œå¯èƒ½æœ‰ä¸€äº›åº“å®ç°åˆ†é¡µçš„æ–¹å¼æ¯”ç”¨ç®¡é“è¾“é€åˆ° `less` æ›´å¼ºå¤§ã€‚
ä¾‹å¦‚ï¼ŒPython ä¸­çš„ [pypager](https://github.com/prompt-toolkit/pypager)ã€‚

### é”™è¯¯ {#errors}

æŸ¥é˜…æ–‡æ¡£çš„æœ€å¸¸è§çš„åŸå› ä¹‹ä¸€æ˜¯ä¸ºäº†ä¿®æ­£é”™è¯¯ã€‚
å¦‚æœæ‚¨èƒ½æŠŠå¤„ç†é”™è¯¯çš„æ–¹æ³•æ•´ç†è¿›æ–‡æ¡£ï¼Œé‚£ä¹ˆè¿™å°†ä¸ºç”¨æˆ·èŠ‚çœå¤§é‡çš„æ—¶é—´ã€‚

**æ•è·é”™è¯¯å¹¶[ä¸ºäººä»¬é‡å†™ä¹‹](https://www.nngroup.com/articles/error-message-guidelines/)ã€‚**
å¦‚æœæ‚¨é¢„è®¡ä¼šæœ‰é”™è¯¯å‘ç”Ÿï¼Œé‚£å°±æ•è·é”™è¯¯å¹¶é‡å†™é”™è¯¯ä¿¡æ¯ï¼Œä½¿ä¹‹æˆä¸ºæœ‰ç”¨çš„ä¿¡æ¯ã€‚
æŠŠå®ƒæƒ³æˆæ˜¯ä¸€æ¬¡å¯¹è¯ï¼Œç”¨æˆ·åšé”™äº†äº‹ï¼Œç¨‹åºåœ¨å¼•å¯¼ä»–ä»¬èµ°å‘æ­£ç¡®çš„æ–¹å‘ã€‚
ä¾‹å¦‚ã€‚"ä¸èƒ½å†™åˆ° file.txtã€‚æ‚¨å¯èƒ½éœ€è¦é€šè¿‡è¿è¡Œ 'chmod +w file.txt' æ¥ä½¿å…¶å¯å†™ã€‚"

**ä¿¡å™ªæ¯”è‡³å…³é‡è¦ã€‚**
æ‚¨äº§ç”Ÿçš„ä¸ç›¸å…³çš„è¾“å‡ºè¶Šå¤šï¼Œç”¨æˆ·å°±ä¼šèŠ±æ›´å¤šçš„æ—¶é—´æ¥å¼„æ¸…æ¥šä»–ä»¬åšé”™äº†ä»€ä¹ˆã€‚
å¦‚æœæ‚¨çš„ç¨‹åºäº§ç”Ÿäº†å¤šä¸ªç›¸åŒç±»å‹çš„é”™è¯¯ï¼Œè€ƒè™‘å°†å®ƒä»¬åˆ†ç»„åœ¨ä¸€ä¸ªè§£é‡Šæ€§çš„æ ‡é¢˜ä¸‹ï¼Œè€Œä¸æ˜¯æ‰“å°è®¸å¤šçœ‹èµ·æ¥ç›¸ä¼¼çš„è¡Œã€‚

**è€ƒè™‘ç”¨æˆ·é¦–å…ˆä¼šçœ‹å“ªé‡Œã€‚**
æŠŠæœ€é‡è¦çš„ä¿¡æ¯æ”¾åœ¨è¾“å‡ºçš„æœ€åã€‚
ç”¨æˆ·çš„è§†çº¿ä¼šè¢«çº¢è‰²çš„æ–‡å­—æ‰€å¸å¼•ï¼Œæ‰€ä»¥è¦æœ‰æ„è¯†åœ°è°¨æ…ä½¿ç”¨å®ƒã€‚

**å¦‚æœæœ‰ä¸€ä¸ªæ„å¤–çš„æˆ–æ— æ³•è§£é‡Šçš„é”™è¯¯ï¼Œé‚£ä¹ˆæä¾›è°ƒè¯•å’Œè·Ÿè¸ªä¿¡æ¯ï¼Œä»¥åŠå…³äºå¦‚ä½•æäº¤é”™è¯¯çš„è¯´æ˜ã€‚**
ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸è¦å¿˜è®°ä¿¡å™ªæ¯”ï¼šæ‚¨ä¸å¸Œæœ›ç”¨ä»–ä»¬ä¸ç†è§£çš„ä¿¡æ¯æ¥æ·¹æ²¡ç”¨æˆ·ã€‚
è€ƒè™‘å°†è°ƒè¯•æ—¥å¿—å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè€Œä¸æ˜¯æ‰“å°åˆ°ç»ˆç«¯ã€‚

**è®©æäº¤é”™è¯¯æŠ¥å‘Šå˜å¾—æ¯«ä¸è´¹åŠ›ã€‚**
æ‚¨éœ€è¦æä¾›ä¸€ä¸ª URLï¼Œå¹¶è®©å®ƒé¢„å…ˆå¡«å…¥å°½å¯èƒ½å¤šçš„ä¿¡æ¯ã€‚

### å‚æ•°ä¸é€‰é¡¹ {#arguments-and-flags}

æœ¯è¯­:

- _Arguments_, æˆ– _args_, æ˜¯å‘½ä»¤çš„ä½ç½®å‚æ•°.
  æ¯”å¦‚ï¼Œæ‚¨æä¾›ç»™ `cp` çš„æ–‡ä»¶è·¯å¾„æ˜¯ args.
  args çš„é¡ºåºæ˜¯å¾ˆé‡è¦çš„ï¼š`cp foo bar` çš„æ„æ€ä¸ `cp bar foo` æ˜¯ä¸åŒçš„ã€‚
- _Flags_ æ˜¯å‘½åå‚æ•°, ç”¨è¿å­—ç¬¦å’Œå•å­—æ¯åç§° (`-r`) æˆ–åŒè¿å­—ç¬¦å’Œå¤šå­—æ¯åç§° (`--recursive`) è¡¨ç¤º.
  å®ƒä»¬å¯èƒ½åŒ…å«ä¹Ÿå¯èƒ½ä¸åŒ…å«ç”¨æˆ·æŒ‡å®šçš„å€¼ (`--file foo.txt`, or `--file=foo.txt`).
  ä¸€èˆ¬æ¥è¯´ï¼Œflags çš„é¡ºåºä¸ä¼šå½±å“ç¨‹åºè¯­ä¹‰

**ç›¸æ¯”äº args ä¼˜å…ˆä½¿ç”¨ flagsã€‚**
è™½ç„¶è¿™ä¸ªå¯èƒ½è¦å¤šæ‰“ä¸€äº›å­—ï¼Œä½†æ˜¯è¿™ä¼šè®©æ¥ä¸‹æ¥çš„å·¥ä½œæ›´åŠ æ¸…æ™°ã€‚
è¿™ä¹Ÿä¼šä½¿ç”¨æˆ·æ›´åŠ å®¹æ˜“é€‚åº”åœ¨æœªæ¥è¾“å…¥æ–¹å¼çš„å˜åŒ–ã€‚
æœ‰äº›æ—¶å€™ï¼Œåœ¨ä½¿ç”¨å‚æ•°æ—¶ï¼Œä¸å¤ªå¯èƒ½åœ¨ä¸ç ´åç°æœ‰è¡Œä¸ºæˆ–é€ æˆæ­§ä¹‰çš„æƒ…å†µä¸‹å¢åŠ æ–°çš„è¾“å…¥ã€‚

_Citation: [12 Factor CLI Apps](https://medium.com/@jdxcode/12-factor-cli-apps-dd3c227a0e46)._

**æ‰€æœ‰çš„ flags éƒ½åº”è¯¥æœ‰å®Œæ•´ç‰ˆæœ¬ã€‚**
æ¯”å¦‚ï¼Œæˆ‘ä»¬æœ‰ `-h` å’Œ `--help`ã€‚
flag æ‹¥æœ‰å®Œæ•´çš„ç‰ˆæœ¬åœ¨è„šæœ¬ä¸­æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œæœ‰æ—¶æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„è„šæœ¬æ›´å…·æœ‰æè¿°æ€§ï¼Œè¿™æ—¶å®Œæ•´ç‰ˆæœ¬çš„ flag èƒ½å¤Ÿä½¿æ‚¨ä¸å¿…åˆ°å¤„æŸ¥æ‰¾ flag çš„å«ä¹‰ã€‚

_Citation: [GNU Coding Standards](https://www.gnu.org/prep/standards/html_node/Command_002dLine-Interfaces.html)._

**ä»…å¯¹å¸¸ç”¨çš„ flag ä½¿ç”¨å•å­—æ¯ flag,** å°¤å…¶æ˜¯åœ¨é¡¶å±‚ä½¿ç”¨å­å‘½ä»¤æ—¶ã€‚
è¿™æ ·æ‚¨å°±ä¸ä¼š "æ±¡æŸ“ "æ‚¨çš„ flag çš„å‘½åç©ºé—´ï¼Œé¿å…è®©æ‚¨å¯¹æ‚¨å°†æ¥æ·»åŠ çš„ flag ä½¿ç”¨å¤æ‚çš„å­—æ¯å’Œå¤§å°å†™ã€‚

**å¯¹äºé’ˆå¯¹å¤šä¸ªæ–‡ä»¶çš„ç®€å•æ“ä½œï¼ŒæŒ‡å®šå¤šä¸ª argument æ˜¯å¯è¡Œçš„ã€‚**
æ¯”å¦‚, `rm file1.txt file2.txt file3.txt`.
ä½¿ç”¨é€šé…ç¬¦åŒæ ·å¯è¡Œ: `rm *.txt`.

**å¦‚æœè¢«ä½¿ç”¨äº†å¤šä¸ªä¸åŒç§ç±»çš„ argument ï¼Œé‚£ä¹ˆç”¨æˆ·æˆ–è®¸æ“ä½œé”™è¯¯äº†ã€‚**
é™¤éè¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„æ“ä½œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ‚¨åº”è¯¥æä¾›ä¸€ä¸ªæ›´æ˜ç¡®çš„æè¿°ã€‚
æ¯”å¦‚, `cp <source> <destination>`.

_Citation: [12 Factor CLI Apps](https://medium.com/@jdxcode/12-factor-cli-apps-dd3c227a0e46)._

**å¦‚æœæœ‰ä¸“é—¨çš„åç§°æ ‡å‡†çš„è¯ï¼Œè¯·ä½¿ç”¨æ ‡å‡†çš„ flag åç§°ã€‚**
å¦‚æœå¦ä¸€ä¸ªå¸¸ç”¨çš„å‘½ä»¤ä½¿ç”¨äº†ä¸€ä¸ª flag åç§°ï¼Œæœ€å¥½æ˜¯éµå¾ªè¿™ä¸ªç°æœ‰çš„æ¨¡å¼ã€‚
è¿™æ ·ï¼Œç”¨æˆ·å°±ä¸å¿…è®°ä½ä¸¤ä¸ªä¸åŒçš„é€‰é¡¹ï¼ˆä»¥åŠå®ƒé€‚ç”¨äºå“ªä¸ªå‘½ä»¤ï¼‰ï¼Œç”¨æˆ·ç”šè‡³å¯ä»¥çŒœæµ‹ä¸€ä¸ªé€‰é¡¹ï¼Œè€Œä¸å¿…çœ‹å¸®åŠ©æ–‡æœ¬ã€‚

ä¸‹é¢æ˜¯å¸¸ç”¨çš„é€‰é¡¹:

- `-a`, `--all`: All.
  For example, `ps`, `fetchmail`.
- `-d`, `--debug`: Show debugging output.
- `-f`, `--force`: Force.
  For example, `rm -f` will force the removal of files, even if it thinks it does not have permission to do it.
  This is also useful for commands which are doing something destructive that usually require user confirmation, but you want to force it to do that destructive action in a script.
- `--json`: Display JSON output.
  See the [output](#output) section.
- `-h`, `--help`: Help.
  This should only mean help.
  See the [help](#help) section.
- `--no-input`: See the [interactivity](#interactivity) section.
- `-o`, `--output`: Output file.
  For example, `sort`, `gcc`.
- `-p`, `--port`: Port.
  For example, `psql`, `ssh`.
- `-q`, `--quiet`: Quiet.
  Display less output.
  This is particularly useful when displaying output for humans that you might want to hide when running in a script.
- `-u`, `--user`: User.
  For example, `ps`, `ssh`.
- `--version`: Version.
- `-v`: This can often mean either verbose or version.
  You might want to use `-d` for verbose and this for version, or for nothing to avoid confusion.

**è®©é»˜è®¤å€¼æˆä¸ºå¤§å¤šæ•°ç”¨æˆ·çš„æ­£ç¡®é€‰æ‹©ã€‚**
å¯é…ç½®åŒ–æ˜¯ä¸é”™çš„ï¼Œä½†å¤§å¤šæ•°ç”¨æˆ·ä¸ä¼šæ‰¾åˆ°æ­£ç¡®çš„ flags å¹¶è®°å¾—ä¸€ç›´ä½¿ç”¨å®ƒï¼ˆæˆ–åˆ«åï¼‰ã€‚
å¦‚æœå®ƒä¸æ˜¯é»˜è®¤çš„ï¼Œæ‚¨å°±ä¼šä½¿æ‚¨çš„å¤§å¤šæ•°ç”¨æˆ·çš„ä½“éªŒå˜å·®ã€‚

æ¯”å¦‚ï¼Œ`ls` æœ‰ç®€æ˜çš„é»˜è®¤è¾“å‡ºä»¥ä¼˜åŒ–è„šæœ¬å’Œå…¶ä»–å†å²é—®é¢˜, ä½†å¦‚æœæ˜¯ä»Šå¤©çš„è®¾è®¡ï¼Œå®ƒå¯èƒ½ä¼šé»˜è®¤æ˜¯ `ls -lhFGT`.

**å‘ç”¨æˆ·æä¾› promptã€‚**
å¦‚æœç”¨æˆ·æ²¡æœ‰ä¼ é€’ argument æˆ– flagï¼Œé‚£å°±è¿›è¡Œ promptã€‚
(See also: [äº¤äº’æ€§](#interactivity))

**ä¸å† _éœ€è¦_ prompt.**
å‘ç”¨æˆ·ä¸€ç›´æä¾›ä¸€ç§ä¼ é€’ flags å’Œ arguments çš„è¾“å…¥æ–¹å¼ã€‚
å¦‚æœ `stdin` ä¸æ˜¯ä¸€ä¸ªäº¤äº’å¼ç»ˆç«¯ï¼Œè·³è¿‡ prompting å¹¶åªéœ€è¦ flags/argsã€‚

**åœ¨åšä»»ä½•å±é™©çš„æ“ä½œä¹‹å‰è¿›è¡Œç¡®è®¤ã€‚**
å¦‚æœè¿è¡Œåœ¨äº¤äº’å¼ç¯å¢ƒï¼Œä¸€ä¸ªå¸¸è§çš„åšæ³•æ˜¯æç¤ºç”¨æˆ·é”®å…¥ `y` or `yes`, æˆ–è€…è¦æ±‚ç”¨æˆ·ä¼ å…¥ `-f` or `--force`.

â€œå±é™©æ€§â€ æ˜¯ä¸€ä¸ªä¸»è§‚æ€§æœ¯è¯­, å­˜åœ¨ä¸åŒç­‰çº§çš„å±é™©:

- **Mild:** A small, local change such as deleting a file.
  You might want to prompt for confirmation, you might not.
  For example, if the user is explicitly running a command called something like â€œdelete,â€ you probably donâ€™t need to ask.
- **Moderate:** A bigger local change like deleting a directory, a remote change like deleting a resource of some kind, or a complex bulk modification that canâ€™t be easily undone.
  You usually want to prompt for confirmation here.
  Consider giving the user a way to â€œdry runâ€ the operation so they can see whatâ€™ll happen before they commit to it.
- **Severe:** Deleting something complex, like an entire remote application or server.
  You donâ€™t just want to prompt for confirmation hereâ€”you want to make it hard to confirm by accident.
  Consider asking them to type something non-trivial such as the name of the thing theyâ€™re deleting.
  Let them alternatively pass a flag such as `--confirm="name-of-thing"`, so itâ€™s still scriptable.

è€ƒè™‘æ˜¯å¦æœ‰ä¸æ˜æ˜¾çš„æ–¹å¼æ„å¤–åœ°ç ´åäº‹ç‰©ã€‚
ä¾‹å¦‚ï¼Œæƒ³è±¡ä¸€ä¸‹è¿™æ ·ä¸€ç§æƒ…å†µï¼šå°†é…ç½®æ–‡ä»¶ä¸­çš„ä¸€ä¸ªæ•°å­—ä» 10 æ”¹ä¸º 1ï¼Œæ„å‘³ç€ 9 ä¸ªä¸œè¥¿å°†è¢«éšå¼åˆ é™¤--è¿™åº”è¯¥è¢«è®¤ä¸ºæ˜¯ä¸€ç§ä¸¥é‡çš„é£é™©ï¼Œè€Œä¸”åº”è¯¥å¾ˆéš¾æ„å¤–åœ°åšåˆ°ã€‚

**If input or output is a file, support `-` to read from `stdin` or write to `stdout`.**
This lets the output of another command be the input of your command and vice versa, without using a temporary file.
For example, `tar` can extract files from `stdin`:

```
$ curl https://example.com/something.tar.gz | tar xvf -
```

**If a flag can accept an optional value, allow a special word like â€œnone.â€**
For example, `ssh -F` takes an optional filename of an alternative `ssh_config` file, and `ssh -F none` runs SSH with no config file. Donâ€™t just use a blank valueâ€”this can make it ambiguous whether arguments are flag values or arguments.

**If possible, make arguments, flags and subcommands order-independent.**
A lot of CLIs, especially those with subcommands, have unspoken rules on where you can put various arguments.
For example a command might have a `--foo` flag that only works if you put it before the subcommand:

```
mycmd --foo=1 subcmd
works

$ mycmd subcmd --foo=1
unknown flag: --foo
```

This can be very confusing for the userâ€”especially given that one of the most common things users do when trying to get a command to work is to hit the up arrow to get the last invocation, stick another option on the end, and run it again.
If possible, try to make both forms equivalent, although you might run up against the limitations of your argument parser.

**Allow sensitive argument values to be passed in via files.**
Letâ€™s say your command takes a secret via a `--password` argument.
A raw `--password` argument will leak the secret into `ps` output and potentially shell history.
Itâ€™s easy to misuse.
Consider allowing secrets only via files, e.g. with a `--password-file` argument.
A `--password-file` argument allows a secret to be passed in discreetly, in a wide variety of contexts.

(Itâ€™s possible to pass a fileâ€™s contents into an argument in Bash by using `--password $(< password.txt)`.
Unfortunately, not every context in which a command is run will have access to magical shell substitutions.
For example, `systemd` service definitions, `exec` system calls, and some `Dockerfile` command forms do not support the substitutions available in most shells.
Whatâ€™s more, this approach has the same security issue of leaking the fileâ€™s contents into places like the output of `ps`.
Itâ€™s best avoided.)

### äº¤äº’æ€§ {#interactivity}

**Only use prompts or interactive elements if `stdin` is an interactive terminal (a TTY).**
This is a pretty reliable way to tell whether youâ€™re piping data into a command or whether it's being run in a script, in which case a prompt wonâ€™t work and you should throw an error telling the user what flag to pass.

**If `--no-input` is passed, donâ€™t prompt or do anything interactive.**
This allows users an explicit way to disable all prompts in commands.
If the command requires input, fail and tell the user how to pass the information as a flag.

**If youâ€™re prompting for a password, donâ€™t print it as the user types.**
This is done by turning off echo in the terminal.
Your language should have helpers for this.

**Let the user escape.**
Make it clear how to get out.
(Donâ€™t do what vim does.)
If your program hangs on network I/O etc, always make Ctrl-C still work.
If itâ€™s a wrapper around program execution where Ctrl-C canâ€™t quit (SSH, tmux, telnet, etc), make it clear how to do that.
For example, SSH allows escape sequences with the `~` escape character.

### å­å‘½ä»¤

If youâ€™ve got a tool thatâ€™s sufficiently complex, you can reduce its complexity by making a set of subcommands.
If you have several tools that are very closely related, you can make them easier to use and discover by combining them into a single command (for example, RCS vs. Git).

Theyâ€™re useful for sharing stuffâ€”global flags, help text, configuration, storage mechanisms.

**Be consistent across subcommands.**
Use the same flag names for the same things, have similar output formatting, etc. 

**Use consistent names for multiple levels of subcommand.**
If a complex piece of software has lots of objects and operations that can be performed on those objects, it is a common pattern to use two levels of subcommand for this, where one is a noun and one is a verb.
For example, `docker container create`.
Be consistent with the verbs you use across different types of objects.

Either `noun verb` or `verb noun` ordering works, but `noun verb` seems to be more common.

_Further reading: [User experience, CLIs, and breaking the world, by John Starich](https://uxdesign.cc/user-experience-clis-and-breaking-the-world-baed8709244f)._

**Donâ€™t have ambiguous or similarly-named commands.**
For example, having two subcommands called â€œupdateâ€ and â€œupgradeâ€ is quite confusing.
You might want to use different words, or disambiguate with extra words.

### é²æ£’æ€§ {#robustness-guidelines}

**Validate user input.**
Everywhere your program accepts data from the user, it will eventually be given bad data.
Check early and bail out before anything bad happens, and [make the errors understandable](#errors).

**Responsive is more important than fast.**
Print something to the user in <100ms.
If youâ€™re making a network request, print something before you do it so it doesnâ€™t hang and look broken.

**Show progress if something takes a long time.**
If your program displays no output for a while, it will look broken.
A good spinner or progress indicator can make a program appear to be faster than it is.

Ubuntu 20.04 has a nice progress bar that sticks to the bottom of the terminal.

<!-- (TK reproduce this as a code block or animated SVG) -->

If the progress bar gets stuck in one place for a long time, the user wonâ€™t know if stuff is still happening or if the programâ€™s crashed.
Itâ€™s good to show estimated time remaining, or even just have an animated component, to reassure them that youâ€™re still working on it.

There are many good libraries for generating progress bars.
For example, [tqdm](https://github.com/tqdm/tqdm) for Python, [schollz/progressbar](https://github.com/schollz/progressbar) for Go, and [node-progress](https://github.com/visionmedia/node-progress) for Node.js.

**Do stuff in parallel where you can, but be thoughtful about it.**
Itâ€™s already difficult to report progress in the shell; doing it for parallel processes is ten times harder.
Make sure itâ€™s robust, and that the output isnâ€™t confusingly interleaved.
If you can use a library, do soâ€”this is code you donâ€™t want to write yourself.
Libraries like [tqdm](https://github.com/tqdm/tqdm) for Python and [schollz/progressbar](https://github.com/schollz/progressbar) for Go support multiple progress bars natively.

The upside is that it can be a huge usability gain.
For example, `docker pull`â€™s multiple progress bars offer crucial insight into whatâ€™s going on.

<!-- (TK docker pull animation) -->

One thing to be aware of: hiding logs behind progress bars when things go _well_ makes it much easier for the user to understand whatâ€™s going on, but if there is an error, make sure you print out the logs.
Otherwise, it will be very hard to debug.

**Make things time out.**
Allow network timeouts to be configured, and have a reasonable default so it doesnâ€™t hang forever.

**Make it idempotent.**
If the program fails for some transient reason (e.g. the internet connection went down), you should be able to hit `<up>` and `<enter>` and it should pick up from where it left off.

**Make it crash-only.**
This is the next step up from idempotence.
If you can avoid needing to do any cleanup after operations, or you can defer that cleanup to the next run, your program can exit immediately on failure or interruption.
This makes it both more robust and more responsive.

_Citation: [Crash-only software: More than meets the eye](https://lwn.net/Articles/191059/)._

**People are going to misuse your program.**
Be prepared for that.
They will wrap it in scripts, use it on bad internet connections, run many instances of it at once, and use it in environments you havenâ€™t tested in, with quirks you didnâ€™t anticipate.
(Did you know macOS filesystems are case-insensitive but also case-preserving?)

### å‰ç»æ€§ {#future-proofing}

In software of any kind, itâ€™s crucial that interfaces donâ€™t change without a lengthy and well-documented deprecation process.
Subcommands, arguments, flags, configuration files, environment variables: these are all interfaces, and youâ€™re committing to keeping them working.
([Semantic versioning](https://semver.org/) can only excuse so much change; if youâ€™re putting out a major version bump every month, itâ€™s meaningless.)

**Keep changes additive where you can.**
Rather than modify the behavior of a flag in a backwards-incompatible way, maybe you can add a new flagâ€”as long as it doesnâ€™t bloat the interface too much.
(See also: [Prefer flags to args](#arguments-and-flags).)

**Warn before you make a non-additive change.**
Eventually, youâ€™ll find that you canâ€™t avoid breaking an interface.
Before you do, forewarn your users in the program itself: when they pass the flag youâ€™re looking to deprecate, tell them itâ€™s going to change soon.
Make sure thereâ€™s a way they can modify their usage today to make it future-proof, and tell them how to do it.

If possible, you should detect when theyâ€™ve changed their usage and not show the warning any more: now they wonâ€™t notice a thing when you finally roll out the change.

**Changing output for humans is usually OK.**
The only way to make an interface easy to use is to iterate on it, and if the output is considered an interface, then you canâ€™t iterate on it.
Encourage your users to use `--plain` or `--json` in scripts to keep output stable (see [Output](#output)).

**Donâ€™t have a catch-all subcommand.**
If you have a subcommand thatâ€™s likely to be the most-used one, you might be tempted to let people omit it entirely for brevityâ€™s sake.
For example, say you have a `run` command that wraps an arbitrary shell command:

    $ mycmd run echo "hello world"

You could make it so that if the first argument to `mycmd` isnâ€™t the name of an existing subcommand, you assume the user means `run`, so they can just type this:

    $ mycmd echo "hello world"

This has a serious drawback, though: now you can never add a subcommand named `echo`â€”or _anything at all_â€”without risking breaking existing usages.
If thereâ€™s a script out there that uses `mycmd echo`, it will do something entirely different after that user upgrades to the new version of your tool.

**Donâ€™t allow arbitrary abbreviations of subcommands.**
For example, say your command has an `install` subcommand.
When you added it, you wanted to save users some typing, so you allowed them to type any non-ambiguous prefix, like `mycmd ins`, or even just `mycmd i`, and have it be an alias for `mycmd install`.
Now youâ€™re stuck: you canâ€™t add any more commands beginning with `i`, because there are scripts out there that assume `i` means `install`.

Thereâ€™s nothing wrong with aliasesâ€”saving on typing is goodâ€”but they should be explicit and remain stable.

**Donâ€™t create a â€œtime bomb.â€**
Imagine itâ€™s 20 years from now.
Will your command still run the same as it does today, or will it stop working because some external dependency on the internet has changed or is no longer maintained?
The server most likely to not exist in 20 years is the one that you are maintaining right now.
(But donâ€™t build in a blocking call to Google Analytics either.)

### ä¿¡å·å’Œæ§åˆ¶å­—ç¬¦ {#signals}

**If a user hits Ctrl-C (the INT signal), exit as soon as possible.**
Say something immediately, before you start clean-up.
Add a timeout to any clean-up code so it canâ€™t hang forever.

**If a user hits Ctrl-C during clean-up operations that might take a long time, skip them.**
Tell the user what will happen when they hit Ctrl-C again, in case it is a destructive action.

For example, when quitting Docker Compose, you can hit Ctrl-C a second time to force your containers to stop immediately instead of shutting them down gracefully.

```
$  docker-compose up
â€¦
^CGracefully stopping... (press Ctrl+C again to force)
```

Your program should expect to be started in a situation where clean-up has not been run.
(See [Crash-only software: More than meets the eye](https://lwn.net/Articles/191059/).)

### é…ç½® {#configuration}

Command-line tools have lots of different types of configuration, and lots of different ways to supply it (flags, environment variables, project-level config files).
The best way to supply each piece of configuration depends on a few factors, chief among them _specificity_, _stability_ and _complexity_.

Configuration generally falls into a few categories:

1.  Likely to vary from one invocation of the command to the next.

    Examples:

    - Setting the level of debugging output
    - Enabling a safe mode or dry run of a program

    Recommendation: **Use [flags](#arguments-and-flags).**
    [Environment variables](#environment-variables) may or may not be useful as well.

2.  Generally stable from one invocation to the next, but not always.
    Might vary between projects.
    Definitely varies between different users working on the same project.

    This type of configuration is often specific to an individual computer.

    Examples:

    - Providing a non-default path to items needed for a program to start
    - Specifying how or whether color should appear in output
    - Specifying an HTTP proxy server to route all requests through

    Recommendation: **Use [flags](#arguments-and-flags) and probably [environment variables](#environment-variables) too.**
    Users may want to set the variables in their shell profile so they apply globally, or in `.env` for a particular project.

    If this configuration is sufficiently complex, it may warrant a configuration file of its own, but environment variables are usually good enough.

3.  Stable within a project, for all users.

    This is the type of configuration that belongs in version control.
    Files like `Makefile`, `package.json` and `docker-compose.yml` are all examples of this.

    Recommendation: **Use a command-specific, version-controlled file.**

**Follow the XDG-spec.**
In 2010 the X Desktop Group, now [freedesktop.org](https://freedesktop.org), developed a specification for the location of base directories where config files may be located.
One goal was to limit the proliferation of dotfiles in a userâ€™s home directory by supporting a general-purpose `~/.config` folder.
The XDG Base Directory Specification ([full spec](https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html), [summary](https://wiki.archlinux.org/index.php/XDG_Base_Directory#Specification)) is supported by yarn, fish, wireshark, emacs, neovim, tmux, and many other projects you know and love.

**If you automatically modify configuration that is not your programâ€™s, ask the user for consent and tell them exactly what youâ€™re doing.**
Prefer creating a new config file (e.g. `/etc/cron.d/myapp`) rather than appending to an existing config file (e.g. `/etc/crontab`).
If you have to append or modify to a system-wide config file, use a dated comment in that file to delineate your additions.

**Apply configuration parameters in order of precedence.**
Here is the precedence for config parameters, from highest to lowest:

- Flags
- The running shellâ€™s environment variables
- Project-level configuration (eg. `.env`)
- User-level configuration
- System wide configuration

### ç¯å¢ƒå˜é‡ {#environment-variables}

**Environment variables are for behavior that _varies with the context_ in which a command is run.**
The â€œenvironmentâ€ of an environment variable is the terminal sessionâ€”the context in which the command is running.
So, an env var might change each time a command runs, or between terminal sessions on one machine, or between instantiations of one project across several machines.

Environment variables may duplicate the functionality of flags or configuration parameters, or they may be distinct from those things.
See [Configuration](#configuration) for a breakdown of common types of configuration and recommendations on when environment variables are most appropriate.

**For maximum portability, environment variable names must only contain uppercase letters, numbers, and underscores (and mustn't start with a number).**
Which means `O_O` and `OWO` are the only emoticons that are also valid environment variable names.

**Aim for single-line environment variable values.**
While multi-line values are possible, they create usability issues with the `env` command.

**Avoid commandeering widely used names.**
Hereâ€™s a [list of POSIX standard env vars](https://pubs.opengroup.org/onlinepubs/009695399/basedefs/xbd_chap08.html).

**Check general-purpose environment variables for configuration values when possible:**

- `NO_COLOR`, to disable color (see [Output](#output)).
- `DEBUG`, to enable more verbose output.
- `EDITOR`, if you need to prompt the user to edit a file or input more than a single line.
- `HTTP_PROXY`, `HTTPS_PROXY`, `ALL_PROXY` and `NO_PROXY`, if youâ€™re going to perform network operations.
  (The HTTP library youâ€™re using might already check for these.)
- `SHELL`, if you need to open up an interactive session of the user's preferred shell.
  (If you need to execute a shell script, use a specific interpreter like `/bin/sh`)
- `TERM`, `TERMINFO` and `TERMCAP`, if youâ€™re going to use terminal-specific escape sequences.
- `TMPDIR`, if youâ€™re going to create temporary files.
- `HOME`, for locating configuration files.
- `PAGER`, if you want to automatically page output.
- `LINES` and `COLUMNS`, for output thatâ€™s dependent on screen size (e.g. tables).

**Read environment variables from `.env` where appropriate.**
If a command defines environment variables that are unlikely to change as long as the user is working in a particular directory, then it should also read them from a local `.env` file so users can configure it differently for different projects without having to specify them every time.
Many languages have libraries for reading `.env` files ([Rust](https://crates.io/crates/dotenv), [Node](https://www.npmjs.com/package/dotenv), [Ruby](https://github.com/bkeepers/dotenv)).

**Donâ€™t use `.env` as a substitute for a proper [configuration file](#configuration).**
`.env` files have a lot of limitations:

- A `.env` file is not commonly stored in source control
- (Therefore, any configuration stored in it has no history)
- It has only one data type: string
- It lends itself to being poorly organized
- It makes encoding issues easy to introduce
- It often contains sensitive credentials & key material that would be better stored more securely

If it seems like these limitations will hamper usability or security, then a dedicated config file might be more appropriate.

### å‘½å {#naming}

The name of your program is particularly important on the CLI: your users will be typing it all the time, and it needs to be easy to remember and type.

**Make it a simple, memorable word.**
But not too generic, or youâ€™ll step on the toes of other commands and confuse users.
For example, both ImageMagick and Windows used the command `convert`.

**Use only lowercase letters, and dashes if you really need to.**
`curl` is a good name, `DownloadURL` is not.

**Keep it short.**
Users will be typing it all the time.
Donâ€™t make it _too_ short: the very shortest commands are best reserved for the common utilities used all the time, such as `cd`, `ls`, `ps`.

**Make it easy to type.**
Some words flow across the QWERTY keyboard much more easily than others, and itâ€™s not just about brevity.
`plum` may be short but itâ€™s an awkward, angular dance.
`apple` trips you up with the double letter.
`orange` is longer than both, but flows much better.

_Further reading: [The Poetics of CLI Command Names](https://smallstep.com/blog/the-poetics-of-cli-command-names/)_

### å‘å¸ƒ {#distribution}

**If possible, distribute as a single binary.**
If your language doesnâ€™t compile to binary executables as standard, see if it has something like [PyInstaller](https://www.pyinstaller.org/).
If you really canâ€™t distribute as a single binary, use the platformâ€™s native package installer so you arenâ€™t scattering things on disk that canâ€™t easily be removed.
Tread lightly on the userâ€™s computer.

If youâ€™re making a language-specific tool, such as a code linter, then this rule doesnâ€™t applyâ€”itâ€™s safe to assume the user has an interpreter for that language installed on their computer.

**Make it easy to uninstall.**
If it needs instructions, put them at the bottom of the install instructionsâ€”one of the most common times people want to uninstall software is right after installing it.

### åˆ†ææ•°æ® {#analytics}

Usage metrics can be helpful to understand how users are using your program, how to make it better, and where to focus effort.
But, unlike websites, users of the command-line expect to be in control of their environment, and it is surprising when programs do things in the background without telling them.

**Do not phone home usage or crash data without consent.**
Users will find out, and they will be angry.
Be very explicit about what you collect, why you collect it, how anonymous it is and how you go about anonymizing it, and how long you retain it for.

Ideally, ask users whether they want to contribute data (â€œopt-inâ€).
If you choose to do it by default (â€œopt-outâ€), then clearly tell users about it on your website or first run, and make it easy to disable.

Examples of projects that collect usage statistics:

- Angular.js [collects detailed analytics using Google Analytics](https://angular.io/analytics), in the name of feature prioritization.
  You have to explicitly opt in.
  You can change the tracking ID to point to your own Google Analytics property if you want to track Angular usage inside your organization.
- Homebrew sends metrics to Google Analytics and has [a nice FAQ](https://docs.brew.sh/Analytics) detailing their practices.
- Next.js [collects anonymized usage statistics](https://nextjs.org/telemetry) and is enabled by default.

**Consider alternatives to collecting analytics.**

- Instrument your web docs.
  If you want to know how people are using your CLI tool, make a set of docs around the use cases youâ€™d like to understand best, and see how they perform over time.
  Look at what people search for within your docs.
- Instrument your downloads.
  This can be a rough metric to understand usage and what operating systems your users are running.
- Talk to your users.
  Reach out and ask people how theyâ€™re using your tool.
  Encourage feedback and feature requests in your docs and repos, and try to draw out more context from those who submit feedback.

_Further reading: [Open Source Metrics](https://opensource.guide/metrics/)_

## æ·±å…¥é˜…è¯»

- [The Unix Programming Environment](https://en.wikipedia.org/wiki/The_Unix_Programming_Environment), Brian W. Kernighan and Rob Pike
- [POSIX Utility Conventions](https://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap12.html)
- [Program Behavior for All Programs](https://www.gnu.org/prep/standards/html_node/Program-Behavior.html), GNU Coding Standards
- [12 Factor CLI Apps](https://medium.com/@jdxcode/12-factor-cli-apps-dd3c227a0e46), Jeff Dickey
- [CLI Style Guide](https://devcenter.heroku.com/articles/cli-style-guide), Heroku
